[
  {
    "id": 89,
    "type": "table",
    "path": "tables/89_user.xs",
    "status": "unchanged",
    "staged": false,
    "sha256": "d9854ddbaeb5ba83b1cc90ea46605752ee9b85e13f10c67582e132efe12c922e",
    "original": "dGFibGUgdXNlciB7CiAgYXV0aCA9IHRydWUKCiAgc2NoZW1hIHsKICAgIHV1aWQgaWQKICAgIHRpbWVzdGFtcCBjcmVhdGVkX2F0Pz1ub3cKICAgIHRleHQgbmFtZSBmaWx0ZXJzPXRyaW0KICAgIGVtYWlsPyBlbWFpbCBmaWx0ZXJzPXRyaW18bG93ZXIKICAgIHBhc3N3b3JkPyBwYXNzd29yZCBmaWx0ZXJzPW1pbjo4fG1pbkFscGhhOjF8bWluRGlnaXQ6MQogIH0KCiAgaW5kZXggPSBbCiAgICB7dHlwZTogInByaW1hcnkiLCBmaWVsZDogW3tuYW1lOiAiaWQifV19CiAgICB7dHlwZTogImJ0cmVlIiwgZmllbGQ6IFt7bmFtZTogImNyZWF0ZWRfYXQiLCBvcDogImRlc2MifV19CiAgICB7dHlwZTogImJ0cmVlfHVuaXF1ZSIsIGZpZWxkOiBbe25hbWU6ICJlbWFpbCIsIG9wOiAiYXNjIn1dfQogIF0KfQ=="
  },
  {
    "id": 90,
    "type": "table",
    "path": "tables/90_score.xs",
    "status": "unchanged",
    "staged": false,
    "sha256": "23c7b12b0f681023f30d99146fa2fd28b9cdfc7a9058fa2635c196288c5c689c",
    "original": "dGFibGUgc2NvcmUgewogIGF1dGggPSBmYWxzZQoKICBzY2hlbWEgewogICAgdXVpZCBpZAogICAgdGltZXN0YW1wIGNyZWF0ZWRfYXQ/PW5vdwogICAgaW50IHNjb3JlPwogICAgdXVpZCB1c2VyX2lkPyB7CiAgICAgIHRhYmxlID0gInVzZXIiCiAgICB9CiAgCiAgICB1dWlkIGdhbWVfaWQ/IHsKICAgICAgdGFibGUgPSAiZ2FtZSIKICAgIH0KICB9CgogIGluZGV4ID0gWwogICAge3R5cGU6ICJwcmltYXJ5IiwgZmllbGQ6IFt7bmFtZTogImlkIn1dfQogICAge3R5cGU6ICJidHJlZSIsIGZpZWxkOiBbe25hbWU6ICJjcmVhdGVkX2F0Iiwgb3A6ICJkZXNjIn1dfQogIF0KfQ=="
  },
  {
    "id": 91,
    "type": "table",
    "path": "tables/91_game.xs",
    "status": "unchanged",
    "staged": false,
    "sha256": "8d289d7bef307ad687bdfbbdf678a96079e41e442d8ad5da3717e5902ebe03a9",
    "original": "dGFibGUgZ2FtZSB7CiAgYXV0aCA9IGZhbHNlCgogIHNjaGVtYSB7CiAgICB1dWlkIGlkCiAgICB0aW1lc3RhbXAgY3JlYXRlZF9hdD89bm93CiAgfQoKICBpbmRleCA9IFsKICAgIHt0eXBlOiAicHJpbWFyeSIsIGZpZWxkOiBbe25hbWU6ICJpZCJ9XX0KICAgIHt0eXBlOiAiYnRyZWUiLCBmaWVsZDogW3tuYW1lOiAiY3JlYXRlZF9hdCIsIG9wOiAiZGVzYyJ9XX0KICBdCn0="
  },
  {
    "id": 44,
    "type": "api_group",
    "path": "apis/authentication/api_group.xs",
    "status": "unchanged",
    "staged": false,
    "sha256": "dba1425366ecfbee828f797925ba28ace2601fdf703803770d317681ba7cf1e8",
    "original": "YXBpX2dyb3VwIEF1dGhlbnRpY2F0aW9uIHsKICBjYW5vbmljYWwgPSAiNEZhOGNNaE0iCn0="
  },
  {
    "id": 286,
    "type": "api_endpoint",
    "path": "apis/game/286_auth_login_POST.xs",
    "status": "unchanged",
    "staged": false,
    "sha256": "3f70d25bc402420a40b785559a73f5498d85c1662d3964e294924e4e0762b801",
    "original": "Ly8gTG9naW4gYW5kIHJldHJpZXZlIGFuIGF1dGhlbnRpY2F0aW9uIHRva2VuCnF1ZXJ5ICJhdXRoL2xvZ2luIiB2ZXJiPVBPU1QgewogIGlucHV0IHsKICAgIGVtYWlsIGVtYWlsPyBmaWx0ZXJzPXRyaW18bG93ZXIKICAgIHRleHQgcGFzc3dvcmQ/CiAgfQoKICBzdGFjayB7CiAgICBkYi5nZXQgdXNlciB7CiAgICAgIGZpZWxkX25hbWUgPSAiZW1haWwiCiAgICAgIGZpZWxkX3ZhbHVlID0gJGlucHV0LmVtYWlsCiAgICAgIG91dHB1dCA9IFsiaWQiLCAiY3JlYXRlZF9hdCIsICJuYW1lIiwgImVtYWlsIiwgInBhc3N3b3JkIl0KICAgIH0gYXMgJHVzZXIKICAKICAgIHByZWNvbmRpdGlvbiAoJHVzZXIgIT0gbnVsbCkgewogICAgICBlcnJvcl90eXBlID0gImFjY2Vzc2RlbmllZCIKICAgICAgZXJyb3IgPSAiSW52YWxpZCBDcmVkZW50aWFscy4iCiAgICB9CiAgCiAgICBzZWN1cml0eS5jaGVja19wYXNzd29yZCB7CiAgICAgIHRleHRfcGFzc3dvcmQgPSAkaW5wdXQucGFzc3dvcmQKICAgICAgaGFzaF9wYXNzd29yZCA9ICR1c2VyLnBhc3N3b3JkCiAgICB9IGFzICRwYXNzX3Jlc3VsdAogIAogICAgcHJlY29uZGl0aW9uICgkcGFzc19yZXN1bHQpIHsKICAgICAgZXJyb3JfdHlwZSA9ICJhY2Nlc3NkZW5pZWQiCiAgICAgIGVycm9yID0gIkludmFsaWQgQ3JlZGVudGlhbHMuIgogICAgfQogIAogICAgc2VjdXJpdHkuY3JlYXRlX2F1dGhfdG9rZW4gewogICAgICB0YWJsZSA9ICJ1c2VyIgogICAgICBleHRyYXMgPSB7fQogICAgICBleHBpcmF0aW9uID0gODY0MDAKICAgICAgaWQgPSAkdXNlci5pZAogICAgfSBhcyAkYXV0aFRva2VuCiAgfQoKICByZXNwb25zZSA9IHthdXRoVG9rZW46ICRhdXRoVG9rZW59Cn0="
  },
  {
    "id": 287,
    "type": "api_endpoint",
    "path": "apis/game/287_auth_signup_POST.xs",
    "status": "unchanged",
    "staged": false,
    "sha256": "d15163ae1667a8c637a8519fd3ae117eb1bdfd7e6b23f2afb5d2ebca1988c3c6",
    "original": "Ly8gU2lnbnVwIGFuZCByZXRyaWV2ZSBhbiBhdXRoZW50aWNhdGlvbiB0b2tlbgpxdWVyeSAiYXV0aC9zaWdudXAiIHZlcmI9UE9TVCB7CiAgaW5wdXQgewogICAgdGV4dCBuYW1lPwogICAgZW1haWwgZW1haWw/IGZpbHRlcnM9dHJpbXxsb3dlcgogICAgdGV4dCBwYXNzd29yZD8KICB9CgogIHN0YWNrIHsKICAgIGRiLmdldCB1c2VyIHsKICAgICAgZmllbGRfbmFtZSA9ICJlbWFpbCIKICAgICAgZmllbGRfdmFsdWUgPSAkaW5wdXQuZW1haWwKICAgIH0gYXMgJHVzZXIKICAKICAgIHByZWNvbmRpdGlvbiAoJHVzZXIgPT0gbnVsbCkgewogICAgICBlcnJvcl90eXBlID0gImFjY2Vzc2RlbmllZCIKICAgICAgZXJyb3IgPSAiVGhpcyBhY2NvdW50IGlzIGFscmVhZHkgaW4gdXNlLiIKICAgIH0KICAKICAgIGRiLmFkZCB1c2VyIHsKICAgICAgZGF0YSA9IHsKICAgICAgICBjcmVhdGVkX2F0OiAibm93IgogICAgICAgIG5hbWUgICAgICA6ICRpbnB1dC5uYW1lCiAgICAgICAgZW1haWwgICAgIDogJGlucHV0LmVtYWlsCiAgICAgICAgcGFzc3dvcmQgIDogJGlucHV0LnBhc3N3b3JkCiAgICAgIH0KICAgIH0gYXMgJHVzZXIKICAKICAgIHNlY3VyaXR5LmNyZWF0ZV9hdXRoX3Rva2VuIHsKICAgICAgdGFibGUgPSAidXNlciIKICAgICAgZXh0cmFzID0ge30KICAgICAgZXhwaXJhdGlvbiA9IDg2NDAwCiAgICAgIGlkID0gJHVzZXIuaWQKICAgIH0gYXMgJGF1dGhUb2tlbgogIH0KCiAgcmVzcG9uc2UgPSB7YXV0aFRva2VuOiAkYXV0aFRva2VufQp9"
  },
  {
    "id": 288,
    "type": "api_endpoint",
    "path": "apis/game/288_auth_me_GET.xs",
    "status": "unchanged",
    "staged": false,
    "sha256": "3d18c0f4d5b85b5dfb640820e04f1b88e8c300336bd989ad90c9c99cdfe670eb",
    "original": "Ly8gR2V0IHRoZSB1c2VyIHJlY29yZCBiZWxvbmdpbmcgdG8gdGhlIGF1dGhlbnRpY2F0aW9uIHRva2VuCnF1ZXJ5ICJhdXRoL21lIiB2ZXJiPUdFVCB7CiAgYXV0aCA9ICJ1c2VyIgoKICBpbnB1dCB7CiAgfQoKICBzdGFjayB7CiAgICBkYi5nZXQgdXNlciB7CiAgICAgIGZpZWxkX25hbWUgPSAiaWQiCiAgICAgIGZpZWxkX3ZhbHVlID0gJGF1dGguaWQKICAgICAgb3V0cHV0ID0gWyJpZCIsICJjcmVhdGVkX2F0IiwgIm5hbWUiLCAiZW1haWwiXQogICAgfSBhcyAkdXNlcgogIH0KCiAgcmVzcG9uc2UgPSAkdXNlcgp9"
  },
  {
    "id": 297,
    "type": "api_endpoint",
    "path": "apis/game/297_game_POST.xs",
    "status": "unchanged",
    "staged": false,
    "sha256": "97bec90e2c2ec4d14293f43fc0a5793cdcd852ab938b18f6a3f8febac94d8d91",
    "original": "Ly8gQWRkIGdhbWUgcmVjb3JkCnF1ZXJ5IGdhbWUgdmVyYj1QT1NUIHsKICBpbnB1dCB7CiAgICBkYmxpbmsgewogICAgICB0YWJsZSA9ICJnYW1lIgogICAgfQogIH0KCiAgc3RhY2sgewogICAgZGIuYWRkIGdhbWUgewogICAgICBkYXRhID0ge2NyZWF0ZWRfYXQ6ICJub3ciLCB0b2tlbjogJGNyeXB0bzF9CiAgICB9IGFzICRnYW1lCiAgfQoKICByZXNwb25zZSA9ICRnYW1lCn0="
  },
  {
    "id": 299,
    "type": "api_endpoint",
    "path": "apis/game/299_leaderboards_GET.xs",
    "status": "unchanged",
    "staged": false,
    "sha256": "da3dbbd7d54567d11a893efb503220897bbd6228e7c10b82665cda981b23beb6",
    "original": "cXVlcnkgbGVhZGVyYm9hcmRzIHZlcmI9R0VUIHsKICBpbnB1dCB7CiAgfQoKICBzdGFjayB7CiAgICBkYi5xdWVyeSBzY29yZSB7CiAgICAgIHNvcnQgPSB7c2NvcmUuc2NvcmU6ICJkZXNjIn0KICAgICAgcmV0dXJuID0ge3R5cGU6ICJsaXN0IiwgcGFnaW5nOiB7cGFnZTogMSwgcGVyX3BhZ2U6IDE1fX0KICAgICAgb3V0cHV0ID0gWwogICAgICAgICJpdGVtc1JlY2VpdmVkIgogICAgICAgICJjdXJQYWdlIgogICAgICAgICJuZXh0UGFnZSIKICAgICAgICAicHJldlBhZ2UiCiAgICAgICAgIm9mZnNldCIKICAgICAgICAiaXRlbXMuc2NvcmUiCiAgICAgICAgIml0ZW1zLnVzZXJfaWQiCiAgICAgIF0KICAgIAogICAgICBhZGRvbiA9IHsKICAgICAgICBpdGVtcy51c2VyOiB7CiAgICAgICAgICBuYW1lICA6ICJ1c2VyIgogICAgICAgICAgb3V0cHV0OiBbIm5hbWUiXQogICAgICAgICAgaW5wdXQgOiB7dXNlcl9pZDogJG91dHB1dC51c2VyX2lkfQogICAgICAgIH0KICAgICAgfQogICAgfSBhcyAkbW9kZWwKICB9CgogIHJlc3BvbnNlID0gJG1vZGVsCn0="
  },
  {
    "id": 300,
    "type": "api_endpoint",
    "path": "apis/game/300_personal_position_on_leaderboard_GET.xs",
    "status": "unchanged",
    "staged": false,
    "sha256": "70bf01b668d58a227a06a0cc6dd353885dc6d64337203246c28d4a8d90fedcc1",
    "original": "cXVlcnkgcGVyc29uYWxQb3NpdGlvbk9uTGVhZGVyYm9hcmQgdmVyYj1HRVQgewogIGF1dGggPSAidXNlciIKCiAgaW5wdXQgewogIH0KCiAgc3RhY2sgewogICAgZGIucXVlcnkgc2NvcmUgewogICAgICByZXR1cm4gPSB7dHlwZTogImxpc3QifQogICAgfSBhcyAkc2NvcmUxCiAgCiAgICBhcnJheS5maW5kX2luZGV4ICgkc2NvcmUxKSBpZiAoJHRoaXMudXNlcl9pZCA9PSAkYXV0aC5pZCkgYXMgJHgyfGFkZDoxCiAgfQoKICByZXNwb25zZSA9ICR4Mgp9"
  },
  {
    "id": 678,
    "type": "api_endpoint",
    "path": "apis/game/678_start_game_GET.xs",
    "status": "unchanged",
    "staged": false,
    "sha256": "8e485997e2ba76bf6768521fcde83fb94c4fabd34387d21b6dc0c17a29a29c4d",
    "original": "cXVlcnkgInN0YXJ0LWdhbWUiIHZlcmI9R0VUIHsKICBpbnB1dCB7CiAgfQoKICBzdGFjayB7CiAgICB1dGlsLnRlbXBsYXRlX2VuZ2luZSB7CiAgICAgIHZhbHVlID0gIiIiCiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGh0bWwgbGFuZz0iZW4iPgogICAgICAgIDxoZWFkPgogICAgICAgICAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICAgICAgICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIj4KICAgICAgICAgICAgPHRpdGxlPlhhbm8gRGFzaCAtIE9mZmxpbmUgTW9kZSBFZGl0aW9uPC90aXRsZT4KICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgYm9keSB7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzFhMWEyZSwgIzE2MjEzZSk7CiAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAxMDB2aDsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIC5nYW1lLWhlYWRlciB7CiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAuZ2FtZS10aXRsZSB7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAyLjVlbTsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzAwZjVmZjsKICAgICAgICAgICAgICAgICAgICB0ZXh0LXNoYWRvdzogMCAwIDEwcHggIzAwZjVmZjsKICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAuZ2FtZS1zdWJ0aXRsZSB7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxLjJlbTsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmNmI2YjsKICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDVweCAwOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgLnRhZ2xpbmUgewogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM0ZWNkYzQ7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgY2FudmFzIHsKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjMDBmNWZmOwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDIwcHggcmdiYSgwLCAyNDUsIDI1NSwgMC4zKTsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMGEwYTBhOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgLmNvbnRyb2xzIHsKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4OwogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuOWVtOwogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjYWFhOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgLmdhbWUtb3ZlciB7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICAgICAgICAgIHRvcDogNTAlOwogICAgICAgICAgICAgICAgICAgIGxlZnQ6IDUwJTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuOSk7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMzBweDsKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxNXB4OwogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNmZjZiNmI7CiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAuYmFja2VuZC1qb2tlIHsKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDEwNywgMTA3LCAwLjEpOwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuOGVtOwogICAgICAgICAgICAgICAgICAgIG1heC13aWR0aDogNjAwcHg7CiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgLmF1dGgtc2VjdGlvbiB7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICAgICAgICAgIHRvcDogMjBweDsKICAgICAgICAgICAgICAgICAgICByaWdodDogMjBweDsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgICAgICAgIGdhcDogMTBweDsKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiAxMDAwOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgLmF1dGgtYnRuLCAubGVhZGVyYm9hcmQtYnRuIHsKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA4cHggMTZweDsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDI0NSwgMjU1LCAwLjIpOwogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMGY1ZmY7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMDBmNWZmOwogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOwogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07CiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIC5hdXRoLWJ0bjpob3ZlciwgLmxlYWRlcmJvYXJkLWJ0bjpob3ZlciB7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAyNDUsIDI1NSwgMC40KTsKICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDAsIDI0NSwgMjU1LCAwLjMpOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgLm1vZGFsIHsKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC44KTsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogMjAwMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIC5tb2RhbC1jb250ZW50IHsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMWExYTJlLCAjMTYyMTNlKTsKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAzMHB4OwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzAwZjVmZjsKICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMzBweCByZ2JhKDAsIDI0NSwgMjU1LCAwLjMpOwogICAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDogNDAwcHg7CiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiA1MDBweDsKICAgICAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiA4MHZoOwogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAubW9kYWwgaDIgewogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMDBmNWZmOwogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4OwogICAgICAgICAgICAgICAgICAgIHRleHQtc2hhZG93OiAwIDAgMTBweCAjMDBmNWZmOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgLmZvcm0tZ3JvdXAgewogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAuZm9ybS1ncm91cCBsYWJlbCB7CiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM0ZWNkYzQ7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4OwogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAuZm9ybS1ncm91cCBpbnB1dCB7CiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTBweDsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNSk7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzAwZjVmZjsKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIC5mb3JtLWdyb3VwIGlucHV0OmZvY3VzIHsKICAgICAgICAgICAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwgMjQ1LCAyNTUsIDAuMyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAubW9kYWwtYnV0dG9ucyB7CiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgICAgICAgICBnYXA6IDEwcHg7CiAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIC5tb2RhbC1idG4gewogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDsKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOwogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMWVtOwogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAubW9kYWwtYnRuLnByaW1hcnkgewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMGY1ZmY7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMwMDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAubW9kYWwtYnRuLnByaW1hcnk6aG92ZXIgewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICM0ZWNkYzQ7CiAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLCAyNDUsIDI1NSwgMC41KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIC5tb2RhbC1idG4uc2Vjb25kYXJ5IHsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmNmI2YjsKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZmY2YjZiOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgLm1vZGFsLWJ0bi5zZWNvbmRhcnk6aG92ZXIgewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAxMDcsIDEwNywgMC4yKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIC51c2VyLWluZm8gewogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgICAgICAgICB0b3A6IDIwcHg7CiAgICAgICAgICAgICAgICAgICAgbGVmdDogMjBweDsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzRlY2RjNDsKICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOwogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjUpOwogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM0ZWNkYzQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAubGVhZGVyYm9hcmQtdGFibGUgewogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMTVweDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIC5sZWFkZXJib2FyZC10YWJsZSB0aCwKICAgICAgICAgICAgICAgIC5sZWFkZXJib2FyZC10YWJsZSB0ZCB7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7CiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsKICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgwLCAyNDUsIDI1NSwgMC4yKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIC5sZWFkZXJib2FyZC10YWJsZSB0aCB7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMwMGY1ZmY7CiAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAubGVhZGVyYm9hcmQtdGFibGUgdGQgewogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgLmxlYWRlcmJvYXJkLXRhYmxlIHRyOmhvdmVyIHsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDI0NSwgMjU1LCAwLjEpOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgLmVycm9yLW1lc3NhZ2UgewogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmY2YjZiOwogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44ZW07CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogNXB4OwogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIC5zdWNjZXNzLW1lc3NhZ2UgewogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjNGVjZGM0OwogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44ZW07CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogNXB4OwogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIC5yYWluYm93IHsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoNDVkZWcsICNmZjAwMDAsICNmZjdmMDAsICNmZmZmMDAsICMwMGZmMDAsICMwMDAwZmYsICM0YjAwODIsICM5NDAwZDMpOwogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogNDAwJSA0MDAlOwogICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogcmFpbmJvdyAycyBsaW5lYXIgaW5maW5pdGU7CiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6IHRleHQ7CiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6IHRyYW5zcGFyZW50OwogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY2xpcDogdGV4dDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIEBrZXlmcmFtZXMgcmFpbmJvdyB7CiAgICAgICAgICAgICAgICAgICAgMCUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwJSA1MCU7IH0KICAgICAgICAgICAgICAgICAgICA1MCUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAxMDAlIDUwJTsgfQogICAgICAgICAgICAgICAgICAgIDEwMCUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwJSA1MCU7IH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIC5sb2FkaW5nLXNwaW5uZXIgewogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHJnYmEoMCwgMjQ1LCAyNTUsIDAuMik7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAjMDBmNWZmOwogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyMHB4OwogICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjBweDsKICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlOwogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICBAa2V5ZnJhbWVzIHNwaW4gewogICAgICAgICAgICAgICAgICAgIDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH0KICAgICAgICAgICAgICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfQogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgLmxvYWRpbmctdGV4dCB7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM0ZWNkYzQ7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjllbTsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAuZGVhdGgtYW5pbWF0aW9uIHsKICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246IGRlYXRoU2hha2UgMC41cyBlYXNlLWluLW91dDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIEBrZXlmcmFtZXMgZGVhdGhTaGFrZSB7CiAgICAgICAgICAgICAgICAgICAgMCUsIDEwMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7IH0KICAgICAgICAgICAgICAgICAgICAxMCUsIDMwJSwgNTAlLCA3MCUsIDkwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNXB4KTsgfQogICAgICAgICAgICAgICAgICAgIDIwJSwgNDAlLCA2MCUsIDgwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCg1cHgpOyB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAubmV3LWhpZ2gtc2NvcmUgewogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZkNzAwICFpbXBvcnRhbnQ7CiAgICAgICAgICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDAgMCAyMHB4ICNmZmQ3MDA7CiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBwdWxzZUdvbGQgMXMgZWFzZS1pbi1vdXQgaW5maW5pdGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICBAa2V5ZnJhbWVzIHB1bHNlR29sZCB7CiAgICAgICAgICAgICAgICAgICAgMCUsIDEwMCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEpOyBvcGFjaXR5OiAxOyB9CiAgICAgICAgICAgICAgICAgICAgNTAlIHsgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsgb3BhY2l0eTogMC44OyB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgPC9oZWFkPgogICAgICAgIDxib2R5PgogICAgICAgICAgICA8IS0tIEF1dGhlbnRpY2F0aW9uIFNlY3Rpb24gLS0+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1dGgtc2VjdGlvbiIgaWQ9ImF1dGhTZWN0aW9uIj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImF1dGgtYnRuIiBvbmNsaWNrPSJzaG93TG9naW5Nb2RhbCgpIj5Mb2dpbjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYXV0aC1idG4iIG9uY2xpY2s9InNob3dTaWdudXBNb2RhbCgpIj5TaWduIFVwPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8IS0tIExlYWRlcmJvYXJkIEJ1dHRvbiAoYWx3YXlzIHZpc2libGUpIC0tPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXRoLXNlY3Rpb24iIGlkPSJsZWFkZXJib2FyZEJ0bkNvbnRhaW5lciIgc3R5bGU9InRvcDogNzBweDsgcmlnaHQ6IDIwcHg7IHBvc2l0aW9uOiBmaXhlZDsgei1pbmRleDogMTAwMDsgZGlzcGxheTogZmxleDsiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibGVhZGVyYm9hcmQtYnRuIiBvbmNsaWNrPSJzaG93TGVhZGVyYm9hcmQoKSI+8J+PhiBMZWFkZXJib2FyZDwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICAgICAgPCEtLSBVc2VyIEluZm8gKHNob3duIHdoZW4gbG9nZ2VkIGluKSAtLT4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idXNlci1pbmZvIiBpZD0idXNlckluZm8iIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+CiAgICAgICAgICAgICAgICA8ZGl2PvCfkajigI3wn5K7IDxzcGFuIGlkPSJ1c2VyTmFtZSI+TG9hZGluZy4uLjwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDVweDsiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImF1dGgtYnRuIiBvbmNsaWNrPSJsb2dvdXQoKSIgc3R5bGU9InBhZGRpbmc6IDRweCA4cHg7IGZvbnQtc2l6ZTogMC44ZW07Ij5Mb2dvdXQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ2FtZS1oZWFkZXIiPgogICAgICAgICAgICAgICAgPGgxIGNsYXNzPSJnYW1lLXRpdGxlIj7wn6aW4oaS8J+ToSBYQU5PIERBU0g8L2gxPgogICAgICAgICAgICAgICAgPHAgY2xhc3M9ImdhbWUtc3VidGl0bGUiPk9mZmxpbmUgTW9kZTogWGFubyBFZGl0aW9uPC9wPgogICAgICAgICAgICAgICAgPHAgY2xhc3M9InRhZ2xpbmUiPiJUaGUgb25seSB0aW1lIHlvdXIgYmFja2VuZCBmYWlsc+KApiBpcyB3aGVuIHlvdSdyZSBub3QgdXNpbmcgWGFuby4iPC9wPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICAgICAgPGNhbnZhcyBpZD0iZ2FtZUNhbnZhcyIgd2lkdGg9IjEwMDAiIGhlaWdodD0iNDAwIj48L2NhbnZhcz4KICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMiPgogICAgICAgICAgICAgICAgPHA+8J+OriA8c3Ryb25nPlNQQUNFL0NMSUNLPC9zdHJvbmc+IHRvIGp1bXAgfCA8c3Ryb25nPlA8L3N0cm9uZz4gdG8gcGF1c2UgfCA8c3Ryb25nPlI8L3N0cm9uZz4gdG8gcmVzdGFydDwvcD4KICAgICAgICAgICAgICAgIDxwPvCfj4YgQnVpbGQgY29tYm9zIGJ5IGRvZGdpbmcgb2JzdGFjbGVzISB8IOKGkeKGkeKGk+KGk+KGkOKGkuKGkOKGkkJBIGZvciBFYXN0ZXIgZWdnPC9wPgogICAgICAgICAgICAgICAgPHA+U3Vydml2ZSB0aGUgYmFja2VuZCBuaWdodG1hcmUhIENsaWNrIGFueXdoZXJlIHRvIHN0YXJ0ITwvcD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdhbWUtb3ZlciIgaWQ9ImdhbWVPdmVyIj4KICAgICAgICAgICAgICAgIDxoMiBzdHlsZT0iY29sb3I6ICNmZjZiNmI7Ij5CQUNLRU5EIENSQVNIRUQhIPCfkqU8L2gyPgogICAgICAgICAgICAgICAgPHAgaWQ9ImZpbmFsU2NvcmUiPlNjb3JlOiAwPC9wPgogICAgICAgICAgICAgICAgPGRpdiBpZD0ic2NvcmVQcm9tcHQiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBtYXJnaW46IDE1cHggMDsgcGFkZGluZzogMTVweDsgYmFja2dyb3VuZDogcmdiYSgwLCAyNDUsIDI1NSwgMC4xKTsgYm9yZGVyLXJhZGl1czogOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjMDBmNWZmOyI+CiAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9ImNvbG9yOiAjMDBmNWZmOyBtYXJnaW46IDAgMCAxMHB4IDA7Ij7wn4+GIFdhbnQgdG8gc2F2ZSB0aGlzIHNjb3JlIHRvIHRoZSBsZWFkZXJib2FyZD88L3A+CiAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9ImNvbG9yOiAjNGVjZGM0OyBmb250LXNpemU6IDAuOWVtOyBtYXJnaW46IDAgMCAxNXB4IDA7Ij5TaWduIHVwIG5vdyB0byBjb21wZXRlIHdpdGggb3RoZXIgYmFja2VuZCBzdXJ2aXZvcnMhPC9wPgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzaG93U2lnbnVwTW9kYWwoKSIgc3R5bGU9InBhZGRpbmc6IDhweCAxNnB4OyBiYWNrZ3JvdW5kOiAjMDBmNWZmOyBjb2xvcjogIzAwMDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsiPlNpZ24gVXA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzaG93TG9naW5Nb2RhbCgpIiBzdHlsZT0icGFkZGluZzogOHB4IDE2cHg7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyBjb2xvcjogIzRlY2RjNDsgYm9yZGVyOiAxcHggc29saWQgIzRlY2RjNDsgYm9yZGVyLXJhZGl1czogNXB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7Ij5Mb2dpbjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8cCBzdHlsZT0iY29sb3I6ICM0ZWNkYzQ7Ij5NYXliZSB1c2UgWGFubyBuZXh0IHRpbWU/IPCfmIk8L3A+CiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InJlc3RhcnRHYW1lKCkiIHN0eWxlPSJwYWRkaW5nOiAxMHB4IDIwcHg7IGZvbnQtc2l6ZTogMS4xZW07IGJhY2tncm91bmQ6ICMwMGY1ZmY7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogNXB4OyBjdXJzb3I6IHBvaW50ZXI7Ij5UcnkgQWdhaW48L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJhY2tlbmQtam9rZSI+CiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPkJhY2tlbmQgU3RhdHVzOjwvc3Ryb25nPiA8c3BhbiBzdHlsZT0iY29sb3I6ICNmZjZiNmI7Ij7inYwgTm90IEZvdW5kPC9zcGFuPjwvcD4KICAgICAgICAgICAgICAgIDxwPiJUaGlzIGlzIHdoYXQgaGFwcGVucyB3aGVuIHlvdXIgYXBwIGdvZXMgb2ZmbGluZeKApiB1bmxlc3MgeW91J3JlIG9uIFhhbm8uIjwvcD4KICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJmb250LXNpemU6IDAuN2VtOyBtYXJnaW4tdG9wOiAxMHB4OyBjb2xvcjogIzY2NjsiPgogICAgICAgICAgICAgICAgICAgIEJ1aWx0IHVzaW5nIGFic29sdXRlbHkgbm90aGluZyB5b3UgbmVlZCB0byBkZXBsb3kgd2l0aCBYYW5vIOKAlCAKICAgICAgICAgICAgICAgICAgICBidXQgeW91IGNhbiBidW5kbGUgdGhpcyBnYW1lIGFuZCBzZXJ2ZSBpdCBkdXJpbmcgZG93bnRpbWUuCiAgICAgICAgICAgICAgICA8L3A+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIAogICAgICAgICAgICA8IS0tIExvZ2luIE1vZGFsIC0tPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbCIgaWQ9ImxvZ2luTW9kYWwiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtY29udGVudCI+CiAgICAgICAgICAgICAgICAgICAgPGgyPvCflJAgTG9naW4gdG8gWGFubyBEYXNoPC9oMj4KICAgICAgICAgICAgICAgICAgICA8Zm9ybSBpZD0ibG9naW5Gb3JtIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJsb2dpbkVtYWlsIj5FbWFpbDo8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImVtYWlsIiBpZD0ibG9naW5FbWFpbCIgcmVxdWlyZWQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImxvZ2luUGFzc3dvcmQiPlBhc3N3b3JkOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIGlkPSJsb2dpblBhc3N3b3JkIiByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImxvZ2luRXJyb3IiIGNsYXNzPSJlcnJvci1tZXNzYWdlIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtYnV0dG9ucyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9Im1vZGFsLWJ0biBwcmltYXJ5Ij5Mb2dpbjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJtb2RhbC1idG4gc2Vjb25kYXJ5IiBvbmNsaWNrPSJjbG9zZU1vZGFsKCdsb2dpbk1vZGFsJykiPkNhbmNlbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgCiAgICAgICAgICAgIDwhLS0gU2lnbnVwIE1vZGFsIC0tPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbCIgaWQ9InNpZ251cE1vZGFsIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWNvbnRlbnQiPgogICAgICAgICAgICAgICAgICAgIDxoMj7wn5qAIEpvaW4gdGhlIEJhY2tlbmQgV2FycmlvcnM8L2gyPgogICAgICAgICAgICAgICAgICAgIDxmb3JtIGlkPSJzaWdudXBGb3JtIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJzaWdudXBOYW1lIj5Vc2VyYW1lOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InNpZ251cE5hbWUiIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJzaWdudXBFbWFpbCI+RW1haWw6PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJlbWFpbCIgaWQ9InNpZ251cEVtYWlsIiByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0ic2lnbnVwUGFzc3dvcmQiPlBhc3N3b3JkOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIGlkPSJzaWdudXBQYXNzd29yZCIgcmVxdWlyZWQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJzaWdudXBFcnJvciIgY2xhc3M9ImVycm9yLW1lc3NhZ2UiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1idXR0b25zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0ibW9kYWwtYnRuIHByaW1hcnkiPlNpZ24gVXA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibW9kYWwtYnRuIHNlY29uZGFyeSIgb25jbGljaz0iY2xvc2VNb2RhbCgnc2lnbnVwTW9kYWwnKSI+Q2FuY2VsPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZm9ybT4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICAgICAgPCEtLSBMZWFkZXJib2FyZCBNb2RhbCAtLT4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwiIGlkPSJsZWFkZXJib2FyZE1vZGFsIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWNvbnRlbnQiPgogICAgICAgICAgICAgICAgICAgIDxoMj7wn4+GIEJhY2tlbmQgTmlnaHRtYXJlIFN1cnZpdm9yczwvaDI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ibGVhZGVyYm9hcmRDb250ZW50Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICM0ZWNkYzQ7Ij5Mb2FkaW5nIGxlYWRlcmJvYXJkLi4uPC9wPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWJ1dHRvbnMiPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9Im1vZGFsLWJ0biBzZWNvbmRhcnkiIG9uY2xpY2s9ImNsb3NlTW9kYWwoJ2xlYWRlcmJvYXJkTW9kYWwnKSI+Q2xvc2U8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdD4KICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lQ2FudmFzJyk7CiAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFhhbm8gQVBJIENvbmZpZ3VyYXRpb24KICAgICAgICAgICAgICAgIGNvbnN0IFhBTk9fQVVUSF9BUEkgPSAnaHR0cHM6Ly94eG1mLXFydGgtaW5hdC5uN2QueGFuby5pby9hcGk6UzJQREdrZVcnOwogICAgICAgICAgICAgICAgY29uc3QgWEFOT19MRUFERVJCT0FSRF9BUEkgPSAnaHR0cHM6Ly94eG1mLXFydGgtaW5hdC5uN2QueGFuby5pby9hcGk6UzJQREdrZVcnOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBBdXRoZW50aWNhdGlvbiBzdGF0ZQogICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRVc2VyID0gbnVsbDsKICAgICAgICAgICAgICAgIGxldCBhdXRoVG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgneGFub0F1dGhUb2tlbicpOwogICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRHYW1lSWQgPSBudWxsOwogICAgICAgICAgICAgICAgbGV0IGxhc3RTY29yZSA9IDA7IC8vIFN0b3JlIGxhc3Qgc2NvcmUgZm9yIHBvdGVudGlhbCBzdWJtaXNzaW9uIGFmdGVyIHNpZ251cC9sb2dpbgogICAgICAgIAogICAgICAgICAgICAgICAgLy8gR2FtZSBzdGF0ZSAtIEZPUkNFIFJFU0VUIE9OIEVWRVJZIFBBR0UgTE9BRAogICAgICAgICAgICAgICAgbGV0IGdhbWVSdW5uaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBsZXQgZ2FtZVBhdXNlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgbGV0IHBhdXNlU3RhcnRUaW1lID0gMDsKICAgICAgICAgICAgICAgIGxldCB0b3RhbFBhdXNlZFRpbWUgPSAwOwogICAgICAgICAgICAgICAgbGV0IHNjb3JlID0gMDsKICAgICAgICAgICAgICAgIGxldCBoaWdoU2NvcmUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgneGFub0hpZ2hTY29yZScpIHx8IDA7CiAgICAgICAgICAgICAgICBsZXQgZ2FtZVNwZWVkID0gMi4wOyAvLyBBTFdBWVMgc3RhcnQgYXQgMi4wIC0gbm8gZXhjZXB0aW9ucyEKICAgICAgICAgICAgICAgIGxldCBiYXNlR2FtZVNwZWVkID0gMi4wOyAvLyBTdG9yZSB0aGUgb3JpZ2luYWwgYmFzZSBzcGVlZAogICAgICAgICAgICAgICAgbGV0IGlzUmFpbmJvd01vZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGxldCBrb25hbWlDb2RlID0gW107CiAgICAgICAgICAgICAgICBjb25zdCBrb25hbWlTZXF1ZW5jZSA9IFszOCwgMzgsIDQwLCA0MCwgMzcsIDM5LCAzNywgMzksIDY2LCA2NV07IC8vIOKGkeKGkeKGk+KGk+KGkOKGkuKGkOKGkkJBCiAgICAgICAgICAgICAgICBsZXQgY29tYm9Db3VudCA9IDA7CiAgICAgICAgICAgICAgICBsZXQgY29tYm9NdWx0aXBsaWVyID0gMTsKICAgICAgICAgICAgICAgIGxldCBsYXN0T2JzdGFjbGVUaW1lID0gMDsKICAgICAgICAgICAgICAgIGxldCBsYXN0U3BlZWRJbmNyZWFzZSA9IDA7IC8vIFRyYWNrIGxhc3Qgc2NvcmUgd2hlbiBzcGVlZCB3YXMgaW5jcmVhc2VkCiAgICAgICAgICAgICAgICBsZXQgZ2FtZUxvb3BJZCA9IG51bGw7IC8vIFRyYWNrIHRoZSBhbmltYXRpb24gZnJhbWUgSUQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gRk9SQ0UgUkVTRVQgLSBFbnN1cmUgZ2FtZVNwZWVkIGlzIEFMV0FZUyAyLjAgb24gcGFnZSBsb2FkL3JlZnJlc2gKICAgICAgICAgICAgICAgIGNvbnN0IGZvcmNlUmVzZXRTcGVlZCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBnYW1lU3BlZWQgPSBiYXNlR2FtZVNwZWVkOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGT1JDRSBSRVNFVCAtIGdhbWVTcGVlZCBzZXQgdG86JywgZ2FtZVNwZWVkKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIE11bHRpcGxlIGV2ZW50IGxpc3RlbmVycyB0byBjYXRjaCBhbGwgcGFnZSBsb2FkIHNjZW5hcmlvcwogICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmb3JjZVJlc2V0U3BlZWQpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZvcmNlUmVzZXRTcGVlZCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIEVtZXJnZW5jeSBmYWxsYmFjayAtIHJ1biBpbW1lZGlhdGVseQogICAgICAgICAgICAgICAgZm9yY2VSZXNldFNwZWVkKCk7CiAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBQbGF5ZXIgKFhhbm8gU3RhY2sgQmxvY2spCiAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSB7CiAgICAgICAgICAgICAgICAgICAgeDogMTAwLAogICAgICAgICAgICAgICAgICAgIHk6IGNhbnZhcy5oZWlnaHQgLSA4MCwKICAgICAgICAgICAgICAgICAgICB3aWR0aDogNTAsCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA1MCwKICAgICAgICAgICAgICAgICAgICBqdW1wSGVpZ2h0OiAwLAogICAgICAgICAgICAgICAgICAgIGp1bXBTcGVlZDogMCwKICAgICAgICAgICAgICAgICAgICBncm91bmRlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkb3VibGVKdW1wOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBkb3VibGVKdW1wVXNlZDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgaW52aW5jaWJsZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgaW52aW5jaWJsZVN0YXJ0VGltZTogMCwKICAgICAgICAgICAgICAgICAgICBpbnZpbmNpYmxlRHVyYXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmF0ZUxpbWl0ZXJBY3RpdmU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHJhdGVMaW1pdGVyU3RhcnRUaW1lOiAwLAogICAgICAgICAgICAgICAgICAgIHJhdGVMaW1pdGVyRHVyYXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgZGRvc0FjdGl2ZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgZGRvc1RpbWU6IDAsCiAgICAgICAgICAgICAgICAgICAgZGRvc1N0YXJ0VGltZTogMCwKICAgICAgICAgICAgICAgICAgICBkZG9zRGlyZWN0aW9uOiAxCiAgICAgICAgICAgICAgICB9OwogICAgICAgIAogICAgICAgICAgICAgICAgLy8gR2FtZSBvYmplY3RzCiAgICAgICAgICAgICAgICBsZXQgb2JzdGFjbGVzID0gW107CiAgICAgICAgICAgICAgICBsZXQgcG93ZXJVcHMgPSBbXTsKICAgICAgICAgICAgICAgIGxldCBwYXJ0aWNsZXMgPSBbXTsKICAgICAgICAgICAgICAgIGxldCBsYXN0T2JzdGFjbGVYID0gLTIwMDsgLy8gVHJhY2sgbGFzdCBvYnN0YWNsZSBwb3NpdGlvbiBmb3Igc3BhY2luZwogICAgICAgIAogICAgICAgICAgICAgICAgLy8gT2JzdGFjbGUgdHlwZXMgKFhhbm8tdGhlbWVkIGJhY2tlbmQgbmlnaHRtYXJlcyEpCiAgICAgICAgICAgICAgICBjb25zdCBvYnN0YWNsZVR5cGVzID0gWwogICAgICAgICAgICAgICAgICAgIHsgZW1vamk6ICfim5QnLCB0ZXh0OiAnNTAyJywgY29sb3I6ICcjZmY2YjZiJywgd2lkdGg6IDM1LCBoZWlnaHQ6IDMwLCBodW1vcjogIkJhZCBHYXRld2F5IEJsdWVzIiB9LAogICAgICAgICAgICAgICAgICAgIHsgZW1vamk6ICfwn5eh77iPJywgdGV4dDogJ1NRTCcsIGNvbG9yOiAnI2ZmOWY0MycsIHdpZHRoOiAzMCwgaGVpZ2h0OiAzMCwgaHVtb3I6ICJMaXR0bGUgQm9iYnkgVGFibGVzIHN0cmlrZXMgYWdhaW4hIiB9LAogICAgICAgICAgICAgICAgICAgIHsgZW1vamk6ICfwn5CMJywgdGV4dDogJ1NMT1cnLCBjb2xvcjogJyMyNmRlODEnLCB3aWR0aDogNDAsIGhlaWdodDogMjAsIGh1bW9yOiAiTyhuwrIpIGFsZ29yaXRobSBkZXRlY3RlZCIgfSwKICAgICAgICAgICAgICAgICAgICB7IGVtb2ppOiAn8J+aqycsIHRleHQ6ICdDT1JTJywgY29sb3I6ICcjZmQ3OWE4Jywgd2lkdGg6IDM1LCBoZWlnaHQ6IDMwLCBodW1vcjogIkFjY2VzcyBkZW5pZWQgZnJvbSBsb2NhbGhvc3QiIH0sCiAgICAgICAgICAgICAgICAgICAgeyBlbW9qaTogJ/CfkajigI3wn5K7JywgdGV4dDogJ3doaWxlKHRydWUpJywgY29sb3I6ICcjYTI5YmZlJywgd2lkdGg6IDQ1LCBoZWlnaHQ6IDMwLCBodW1vcjogIkluZmluaXRlIGxvb3Agb2YgZGVzcGFpciIgfSwKICAgICAgICAgICAgICAgICAgICB7IGVtb2ppOiAn8J+UkicsIHRleHQ6ICdSQVRFJywgY29sb3I6ICcjZTE3MDU1Jywgd2lkdGg6IDM1LCBoZWlnaHQ6IDMwLCBodW1vcjogIlRvbyBtYW55IHJlcXVlc3RzLCBjaGlsbCBvdXQhIiB9LAogICAgICAgICAgICAgICAgICAgIHsgZW1vamk6ICfwn5K+JywgdGV4dDogJ0xPQ0snLCBjb2xvcjogJyMwMGI4OTQnLCB3aWR0aDogMzUsIGhlaWdodDogMzAsIGh1bW9yOiAiRGF0YWJhc2UgbG9ja2VkIGJ5IG15c3RlcmlvdXMgcHJvY2VzcyIgfSwKICAgICAgICAgICAgICAgICAgICB7IGVtb2ppOiAn4pqhJywgdGV4dDogJ0NBQ0hFJywgY29sb3I6ICcjZmRjYjZlJywgd2lkdGg6IDQwLCBoZWlnaHQ6IDI1LCBodW1vcjogIkNhY2hlIG1pc3MgYXQgdGhlIHdvcnN0IG1vbWVudCIgfSwKICAgICAgICAgICAgICAgICAgICB7IGVtb2ppOiAn8J+UpScsIHRleHQ6ICdPT00nLCBjb2xvcjogJyNlODQzOTMnLCB3aWR0aDogMzAsIGhlaWdodDogMzUsIGh1bW9yOiAiT3V0IG9mIG1lbW9yeSwgb3V0IG9mIGx1Y2siIH0sCiAgICAgICAgICAgICAgICAgICAgeyBlbW9qaTogJ/CfjKrvuI8nLCB0ZXh0OiAnRERPUycsIGNvbG9yOiAnIzZjNWNlNycsIHdpZHRoOiAzNSwgaGVpZ2h0OiAzNSwgaHVtb3I6ICJUcmFmZmljIHRzdW5hbWkgaW5jb21pbmchIiB9LAogICAgICAgICAgICAgICAgICAgIHsgZW1vamk6ICfwn5Wz77iPJywgdGV4dDogJ05VTEwnLCBjb2xvcjogJyM2MzZlNzInLCB3aWR0aDogMzAsIGhlaWdodDogMjUsIGh1bW9yOiAiTnVsbCBwb2ludGVyIGV4Y2VwdGlvbiB2aWJlcyIgfSwKICAgICAgICAgICAgICAgICAgICB7IGVtb2ppOiAn8J+UpycsIHRleHQ6ICdNQUlOVCcsIGNvbG9yOiAnIzAwY2VjOScsIHdpZHRoOiA0MCwgaGVpZ2h0OiAzMCwgaHVtb3I6ICJTY2hlZHVsZWQgZG93bnRpbWUgKHVuc2NoZWR1bGVkIHBhbmljKSIgfQogICAgICAgICAgICAgICAgXTsKICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFBvd2VyLXVwIHR5cGVzCiAgICAgICAgICAgICAgICBjb25zdCBwb3dlclVwVHlwZXMgPSBbCiAgICAgICAgICAgICAgICAgICAgeyBlbW9qaTogJ/Cfp6AnLCB0ZXh0OiAnRnVuY3Rpb24gU3RhY2snLCBjb2xvcjogJyMwMGNlYzknLCBlZmZlY3Q6ICdpbnZpbmNpYmxlJyB9LAogICAgICAgICAgICAgICAgICAgIHsgZW1vamk6ICfimpnvuI8nLCB0ZXh0OiAnQXV0by1TY2FsZScsIGNvbG9yOiAnIzZjNWNlNycsIGVmZmVjdDogJ2RvdWJsZUp1bXAnIH0sCiAgICAgICAgICAgICAgICAgICAgeyBlbW9qaTogJ/Cfm6HvuI8nLCB0ZXh0OiAnUmF0ZSBMaW1pdGVyJywgY29sb3I6ICcjYTI5YmZlJywgZWZmZWN0OiAnc2xvd0Rvd24nIH0KICAgICAgICAgICAgICAgIF07CiAgICAgICAgCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkcmF3UGxheWVyKCkgewogICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci5pbnZpbmNpYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNyArIE1hdGguc2luKERhdGUubm93KCkgKiAwLjAxKSAqIDAuMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBYYW5vIHN0YWNrIGJsb2NrCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JhZGllbnQgPSBjdHguY3JlYXRlTGluZWFyR3JhZGllbnQocGxheWVyLngsIHBsYXllci55LCBwbGF5ZXIueCArIHBsYXllci53aWR0aCwgcGxheWVyLnkgKyBwbGF5ZXIuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMCwgJyMwMGY1ZmYnKTsKICAgICAgICAgICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMSwgJyMwMDkxZmYnKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gZ3JhZGllbnQ7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHBsYXllci54LCBwbGF5ZXIueSAtIHBsYXllci5qdW1wSGVpZ2h0LCBwbGF5ZXIud2lkdGgsIHBsYXllci5oZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIERyYXcgIlhBTk8iIHRleHQKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnOwogICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJ2JvbGQgMTJweCBDb3VyaWVyIE5ldyc7CiAgICAgICAgICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgnWEFOTycsIHBsYXllci54ICsgcGxheWVyLndpZHRoLzIsIHBsYXllci55IC0gcGxheWVyLmp1bXBIZWlnaHQgKyBwbGF5ZXIuaGVpZ2h0LzIgKyA0KTsKICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiAoaXNSYWluYm93TW9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBSYWluYm93IHRyYWlsIGVmZmVjdAogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBgaHNsKCR7KERhdGUubm93KCkgKiAwLjEgKyBpICogMzYpICUgMzYwfSwgMTAwJSwgNTAlKWA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjMgLSBpICogMC4wMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdChwbGF5ZXIueCAtIGkgKiA1LCBwbGF5ZXIueSAtIHBsYXllci5qdW1wSGVpZ2h0LCBwbGF5ZXIud2lkdGgsIHBsYXllci5oZWlnaHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkcmF3T2JzdGFjbGUob2JzdGFjbGUpIHsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gb2JzdGFjbGUuY29sb3I7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KG9ic3RhY2xlLngsIG9ic3RhY2xlLnksIG9ic3RhY2xlLndpZHRoLCBvYnN0YWNsZS5oZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIERyYXcgZW1vamkKICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICcyNHB4IEFyaWFsJzsKICAgICAgICAgICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KG9ic3RhY2xlLmVtb2ppLCBvYnN0YWNsZS54ICsgb2JzdGFjbGUud2lkdGgvMiwgb2JzdGFjbGUueSArIDMwKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IHRleHQKICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICdib2xkIDEwcHggQ291cmllciBOZXcnOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KG9ic3RhY2xlLnRleHQsIG9ic3RhY2xlLnggKyBvYnN0YWNsZS53aWR0aC8yLCBvYnN0YWNsZS55ICsgb2JzdGFjbGUuaGVpZ2h0IC0gNSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkcmF3UG93ZXJVcChwb3dlclVwKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gRmxvYXRpbmcgYW5pbWF0aW9uCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmxvYXQgPSBNYXRoLnNpbihEYXRlLm5vdygpICogMC4wMDUgKyBwb3dlclVwLnggKiAwLjAxKSAqIDU7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHBvd2VyVXAuY29sb3I7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHBvd2VyVXAueCwgcG93ZXJVcC55ICsgZmxvYXQsIDQwLCA0MCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBlbW9qaQogICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJzIwcHggQXJpYWwnOwogICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQocG93ZXJVcC5lbW9qaSwgcG93ZXJVcC54ICsgMjAsIHBvd2VyVXAueSArIGZsb2F0ICsgMjUpOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlT2JzdGFjbGUoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gT25seSBjcmVhdGUgb2JzdGFjbGUgaWYgdGhlcmUncyBlbm91Z2ggc3BhY2UKICAgICAgICAgICAgICAgICAgICBpZiAoY2FudmFzLndpZHRoIC0gbGFzdE9ic3RhY2xlWCA8IDMwMCkgcmV0dXJuOyAvLyBNaW5pbXVtIDMwMHB4IHNwYWNpbmcKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gb2JzdGFjbGVUeXBlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBvYnN0YWNsZVR5cGVzLmxlbmd0aCldOwogICAgICAgICAgICAgICAgICAgIG9ic3RhY2xlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgeDogY2FudmFzLndpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICB5OiBjYW52YXMuaGVpZ2h0IC0gdHlwZS5oZWlnaHQgLSAzMCwKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHR5cGUud2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogdHlwZS5oZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVtb2ppOiB0eXBlLmVtb2ppLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0eXBlLnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0eXBlLmNvbG9yCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgbGFzdE9ic3RhY2xlWCA9IGNhbnZhcy53aWR0aDsgLy8gVXBkYXRlIGxhc3Qgb2JzdGFjbGUgcG9zaXRpb24KICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBvd2VyVXAoKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IHBvd2VyVXBUeXBlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3dlclVwVHlwZXMubGVuZ3RoKV07CiAgICAgICAgICAgICAgICAgICAgcG93ZXJVcHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHg6IGNhbnZhcy53aWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgeTogY2FudmFzLmhlaWdodCAtIDE1MCwKICAgICAgICAgICAgICAgICAgICAgICAgZW1vamk6IHR5cGUuZW1vamksCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHR5cGUudGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHR5cGUuY29sb3IsCiAgICAgICAgICAgICAgICAgICAgICAgIGVmZmVjdDogdHlwZS5lZmZlY3QKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBsYXllcigpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmICghcGxheWVyLmdyb3VuZGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5qdW1wU3BlZWQgKz0gMC40OyAvLyBOb3JtYWwgZ3Jhdml0eSB0aGF0IGZlZWxzIHJlc3BvbnNpdmUKICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmp1bXBIZWlnaHQgLT0gcGxheWVyLmp1bXBTcGVlZDsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuanVtcEhlaWdodCA8PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuanVtcEhlaWdodCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuanVtcFNwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5ncm91bmRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaW52aW5jaWJpbGl0eSB0aW1lciB3aXRoIHJlYWwgdGltZQogICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuaW52aW5jaWJsZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGFwc2VkID0gbm93IC0gcGxheWVyLmludmluY2libGVTdGFydFRpbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGFwc2VkID49IHBsYXllci5pbnZpbmNpYmxlRHVyYXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5pbnZpbmNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgcmF0ZSBsaW1pdGVyIHRpbWVyIHdpdGggcmVhbCB0aW1lCiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci5yYXRlTGltaXRlckFjdGl2ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGFwc2VkID0gbm93IC0gcGxheWVyLnJhdGVMaW1pdGVyU3RhcnRUaW1lOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxhcHNlZCA+PSBwbGF5ZXIucmF0ZUxpbWl0ZXJEdXJhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLnJhdGVMaW1pdGVyQWN0aXZlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTQUZFIHNwZWVkIHJlc3RvcmF0aW9uIC0gbmV2ZXIgZXhjZWVkIHJlYXNvbmFibGUgYm91bmRzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRTcGVlZCA9IGJhc2VHYW1lU3BlZWQgKyBNYXRoLmZsb29yKHNjb3JlIC8gODAwKSAqIDAuMTU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lU3BlZWQgPSBNYXRoLm1pbih0YXJnZXRTcGVlZCwgZ2FtZVNwZWVkICsgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmF0ZSBsaW1pdGVyIGVuZGVkLCBzcGVlZCByZXN0b3JlZCB0bzonLCBnYW1lU3BlZWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIERET1MgYXR0YWNrIGNoYW9zIQogICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuZGRvc0FjdGl2ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZG9zRWxhcHNlZCA9IERhdGUubm93KCkgLSBwbGF5ZXIuZGRvc1N0YXJ0VGltZTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGRvc0R1cmF0aW9uID0gMTAwMDA7IC8vIDEwIHNlY29uZHMgaW4gbWlsbGlzZWNvbmRzCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBFcnJhdGljIG1vdmVtZW50IGV2ZXJ5IGZldyBmcmFtZXMKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5kZG9zRGlyZWN0aW9uID0gTWF0aC5yYW5kb20oKSA+IDAuNSA/IDEgOiAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci54ICs9IHBsYXllci5kZG9zRGlyZWN0aW9uICogKE1hdGgucmFuZG9tKCkgKiA4ICsgMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgcGxheWVyIG9uIHNjcmVlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci54IDwgNTApIHBsYXllci54ID0gNTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGxheWVyLnggPiBjYW52YXMud2lkdGggLSAxNTApIHBsYXllci54ID0gY2FudmFzLndpZHRoIC0gMTUwOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY291bnRkb3duIGJhc2VkIG9uIHJlYWwgdGltZQogICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuZGRvc1RpbWUgPSBNYXRoLm1heCgwLCBkZG9zRHVyYXRpb24gLSBkZG9zRWxhcHNlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGRvc0VsYXBzZWQgPj0gZGRvc0R1cmF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuZGRvc0FjdGl2ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLnggPSAxMDA7IC8vIFJlc2V0IHRvIG5vcm1hbCBwb3NpdGlvbgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlT2JzdGFjbGVzKCkgewogICAgICAgICAgICAgICAgICAgIG9ic3RhY2xlcyA9IG9ic3RhY2xlcy5maWx0ZXIob2JzdGFjbGUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBvYnN0YWNsZS54IC09IGdhbWVTcGVlZDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ic3RhY2xlLnggKyBvYnN0YWNsZS53aWR0aCA+IDA7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGxhc3RPYnN0YWNsZVggYXMgb2JzdGFjbGVzIG1vdmUgb2ZmIHNjcmVlbgogICAgICAgICAgICAgICAgICAgIGxhc3RPYnN0YWNsZVggLT0gZ2FtZVNwZWVkOwogICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFNwYXduIG5ldyBvYnN0YWNsZXMgKHdpdGggcHJvcGVyIHNwYWNpbmchKQogICAgICAgICAgICAgICAgICAgIGxldCBzcGF3blJhdGUgPSAwLjAwMzsKICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcmUgPiAxMDAwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmNyZWFzZSBvYnN0YWNsZSBzcGF3biByYXRlIGJ5IDE1JSBmb3IgZXZlcnkgMTBrIHBvaW50cyBhZnRlciAxMGsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IDEgKyAoTWF0aC5mbG9vcigoc2NvcmUgLSAxMDAwMCkgLyAxMDAwMCkgKyAxKSAqIDAuMTU7CiAgICAgICAgICAgICAgICAgICAgICAgIHNwYXduUmF0ZSA9IDAuMDAzICogbXVsdGlwbGllcjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCBzcGF3blJhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlT2JzdGFjbGUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVQb3dlclVwcygpIHsKICAgICAgICAgICAgICAgICAgICBwb3dlclVwcyA9IHBvd2VyVXBzLmZpbHRlcihwb3dlclVwID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcG93ZXJVcC54IC09IGdhbWVTcGVlZDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvd2VyVXAueCArIDQwID4gMDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBTcGF3biBuZXcgcG93ZXItdXBzIChtdWNoIHJhcmVyISkKICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMDAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVBvd2VyVXAoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjaGVja0NvbGxpc2lvbnMoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgb2JzdGFjbGUgY29sbGlzaW9ucwogICAgICAgICAgICAgICAgICAgIG9ic3RhY2xlcy5mb3JFYWNoKChvYnN0YWNsZSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci54IDwgb2JzdGFjbGUueCArIG9ic3RhY2xlLndpZHRoICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIueCArIHBsYXllci53aWR0aCA+IG9ic3RhY2xlLnggJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci55IC0gcGxheWVyLmp1bXBIZWlnaHQgPCBvYnN0YWNsZS55ICsgb2JzdGFjbGUuaGVpZ2h0ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIueSAtIHBsYXllci5qdW1wSGVpZ2h0ICsgcGxheWVyLmhlaWdodCA+IG9ic3RhY2xlLnkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwbGF5ZXIuaW52aW5jaWJsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVPdmVyKG9ic3RhY2xlLmh1bW9yIHx8ICJZb3VyIGJhY2tlbmQganVzdCBjcmFzaGVkISIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9ic3RhY2xlLnggKyBvYnN0YWNsZS53aWR0aCA8IHBsYXllci54ICYmICFvYnN0YWNsZS5wYXNzZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBsYXllciBzdWNjZXNzZnVsbHkgcGFzc2VkIHRoaXMgb2JzdGFjbGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic3RhY2xlLnBhc3NlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21ib0NvdW50Kys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21ib011bHRpcGxpZXIgPSAxICsgKGNvbWJvQ291bnQgKiAwLjEpOyAvLyAxMCUgYm9udXMgcGVyIGNvbWJvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0T2JzdGFjbGVUaW1lID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHBvd2VyLXVwIGNvbGxpc2lvbnMKICAgICAgICAgICAgICAgICAgICBwb3dlclVwcyA9IHBvd2VyVXBzLmZpbHRlcihwb3dlclVwID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci54IDwgcG93ZXJVcC54ICsgNDAgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci54ICsgcGxheWVyLndpZHRoID4gcG93ZXJVcC54ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIueSAtIHBsYXllci5qdW1wSGVpZ2h0IDwgcG93ZXJVcC55ICsgNDAgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci55IC0gcGxheWVyLmp1bXBIZWlnaHQgKyBwbGF5ZXIuaGVpZ2h0ID4gcG93ZXJVcC55KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlUG93ZXJVcChwb3dlclVwLmVmZmVjdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIFJlbW92ZSBwb3dlci11cAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGVQb3dlclVwKGVmZmVjdCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlZmZlY3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW52aW5jaWJsZSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuaW52aW5jaWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuaW52aW5jaWJsZVN0YXJ0VGltZSA9IG5vdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5pbnZpbmNpYmxlRHVyYXRpb24gPSA1MDAwOyAvLyA1IHNlY29uZHMgaW4gbWlsbGlzZWNvbmRzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZG91YmxlSnVtcCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBsYXllci5kb3VibGVKdW1wKSB7IC8vIE9ubHkgZ2l2ZSBpZiBub3QgYWxyZWFkeSBoYXZlIG9uZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5kb3VibGVKdW1wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzbG93RG93bic6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBsYXllci5yYXRlTGltaXRlckFjdGl2ZSkgeyAvLyBPbmx5IGFjdGl2YXRlIGlmIG5vdCBhbHJlYWR5IGFjdGl2ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNBRkUgc3BlZWQgcmVkdWN0aW9uIC0gbmV2ZXIgZ28gYmVsb3cgbWluaW11bQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pblNwZWVkID0gTWF0aC5tYXgoMS4wLCBiYXNlR2FtZVNwZWVkIC0gMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVNwZWVkID0gTWF0aC5tYXgobWluU3BlZWQsIGdhbWVTcGVlZCAtIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5yYXRlTGltaXRlckFjdGl2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLnJhdGVMaW1pdGVyU3RhcnRUaW1lID0gbm93OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5yYXRlTGltaXRlckR1cmF0aW9uID0gMzAwMDsgLy8gMyBzZWNvbmRzIGluIG1pbGxpc2Vjb25kcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSYXRlIGxpbWl0ZXIgYWN0aXZhdGVkLCBzcGVlZCByZWR1Y2VkIHRvOicsIGdhbWVTcGVlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBqdW1wKCkgewogICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuZ3JvdW5kZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmp1bXBTcGVlZCA9IC0xMzsgLy8gU2xpZ2h0bHkgaGlnaGVyIGp1bXAKICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmdyb3VuZGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwbGF5ZXIuZG91YmxlSnVtcCkgewogICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuanVtcFNwZWVkID0gLTEwOyAvLyBIaWdoZXIgZG91YmxlIGp1bXAKICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmRvdWJsZUp1bXAgPSBmYWxzZTsgLy8gUmVtb3ZlIHRoZSBwb3dlci11cCBvbmNlIHVzZWQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnYW1lT3ZlcihkZWF0aE1lc3NhZ2UgPSAiWW91ciBiYWNrZW5kIGp1c3QgY3Jhc2hlZCEiKSB7CiAgICAgICAgICAgICAgICAgICAgZ2FtZVJ1bm5pbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBnYW1lUGF1c2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gU3RvcCB0aGUgZ2FtZSBsb29wCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVMb29wSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoZ2FtZUxvb3BJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVMb29wSWQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBEZWF0aCBhbmltYXRpb24KICAgICAgICAgICAgICAgICAgICBjYW52YXMuY2xhc3NMaXN0LmFkZCgnZGVhdGgtYW5pbWF0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjYW52YXMuY2xhc3NMaXN0LnJlbW92ZSgnZGVhdGgtYW5pbWF0aW9uJyksIDUwMCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIG5ldyBoaWdoIHNjb3JlCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNOZXdIaWdoU2NvcmUgPSBzY29yZSA+IGhpZ2hTY29yZTsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNOZXdIaWdoU2NvcmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaGlnaFNjb3JlID0gc2NvcmU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd4YW5vSGlnaFNjb3JlJywgaGlnaFNjb3JlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmluYWxTY29yZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmluYWxTY29yZScpOwogICAgICAgICAgICAgICAgICAgIGZpbmFsU2NvcmVFbGVtZW50LnRleHRDb250ZW50ID0gYFNjb3JlOiAke3Njb3JlLnRvTG9jYWxlU3RyaW5nKCl9YDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBDZWxlYnJhdGUgbmV3IGhpZ2ggc2NvcmUKICAgICAgICAgICAgICAgICAgICBpZiAoaXNOZXdIaWdoU2NvcmUgJiYgc2NvcmUgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsU2NvcmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ25ldy1oaWdoLXNjb3JlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsU2NvcmVFbGVtZW50LnRleHRDb250ZW50ID0gYPCfjokgTkVXIEhJR0ggU0NPUkU6ICR7c2NvcmUudG9Mb2NhbGVTdHJpbmcoKX0hIPCfjolgOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsU2NvcmVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ25ldy1oaWdoLXNjb3JlJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgaHVtb3IgbWVzc2FnZQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVPdmVyRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVPdmVyJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIdW1vciA9IGdhbWVPdmVyRGl2LnF1ZXJ5U2VsZWN0b3IoJy5kZWF0aC1odW1vcicpOwogICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0h1bW9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nSHVtb3IudGV4dENvbnRlbnQgPSBkZWF0aE1lc3NhZ2U7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaHVtb3JQID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpOwogICAgICAgICAgICAgICAgICAgICAgICBodW1vclAuY2xhc3NOYW1lID0gJ2RlYXRoLWh1bW9yJzsKICAgICAgICAgICAgICAgICAgICAgICAgaHVtb3JQLnN0eWxlLmNzc1RleHQgPSAnY29sb3I6ICNmZjZiNmI7IGZvbnQtc3R5bGU6IGl0YWxpYzsgbWFyZ2luOiAxMHB4IDA7IGZvbnQtc2l6ZTogMC45ZW07JzsKICAgICAgICAgICAgICAgICAgICAgICAgaHVtb3JQLnRleHRDb250ZW50ID0gZGVhdGhNZXNzYWdlOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lT3ZlckRpdi5pbnNlcnRCZWZvcmUoaHVtb3JQLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmVQcm9tcHQnKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGdhbWVPdmVyRGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFN0b3JlIHNjb3JlIGZvciBwb3RlbnRpYWwgc3VibWlzc2lvbiBhZnRlciBzaWdudXAvbG9naW4KICAgICAgICAgICAgICAgICAgICBsYXN0U2NvcmUgPSBzY29yZTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBTaG93IHNjb3JlIHByb21wdCBpZiBub3QgbG9nZ2VkIGluIGFuZCBzY29yZSBpcyBkZWNlbnQKICAgICAgICAgICAgICAgICAgICBjb25zdCBzY29yZVByb21wdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZVByb21wdCcpOwogICAgICAgICAgICAgICAgICAgIGlmICghYXV0aFRva2VuICYmIHNjb3JlID4gNTAwKSB7IC8vIFNob3cgcHJvbXB0IGZvciBzY29yZXMgb3ZlciA1MDAKICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmVQcm9tcHQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmVQcm9tcHQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gU3VibWl0IHNjb3JlIHRvIGxlYWRlcmJvYXJkIGlmIGxvZ2dlZCBpbgogICAgICAgICAgICAgICAgICAgIGlmIChhdXRoVG9rZW4gJiYgY3VycmVudEdhbWVJZCkgewogICAgICAgICAgICAgICAgICAgICAgICBzdWJtaXRTY29yZShzY29yZSwgY3VycmVudEdhbWVJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBTaG93IGxlYWRlcmJvYXJkIGFmdGVyIGEgc2hvcnQgZGVsYXkgdG8gbGV0IHNjb3JlIHN1Ym1pdAogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dMZWFkZXJib2FyZCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZXN0YXJ0R2FtZSgpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzdGFydEdhbWUoKSBjYWxsZWQgLSBDdXJyZW50IGdhbWVTcGVlZDonLCBnYW1lU3BlZWQpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFN0b3AgYW55IGV4aXN0aW5nIGdhbWUgbG9vcCBmaXJzdAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lTG9vcElkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGdhbWVMb29wSWQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lTG9vcElkID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gQUJTT0xVVEUgUkVTRVQgLSBOTyBNQVRURVIgV0hBVAogICAgICAgICAgICAgICAgICAgIGdhbWVTcGVlZCA9IGJhc2VHYW1lU3BlZWQ7IC8vIEZJUlNUIFRISU5HIC0gcmVzZXQgc3BlZWQhCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3RhcnRHYW1lKCkgLSBTcGVlZCBGT1JDRUQgdG86JywgZ2FtZVNwZWVkKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBnYW1lUnVubmluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZ2FtZVBhdXNlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHBhdXNlU3RhcnRUaW1lID0gMDsKICAgICAgICAgICAgICAgICAgICB0b3RhbFBhdXNlZFRpbWUgPSAwOwogICAgICAgICAgICAgICAgICAgIHNjb3JlID0gMDsgLy8gUmVzZXQgdG8gbm9ybWFsIHN0YXJ0aW5nIHNjb3JlCiAgICAgICAgICAgICAgICAgICAgb2JzdGFjbGVzID0gW107CiAgICAgICAgICAgICAgICAgICAgcG93ZXJVcHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBsYXN0T2JzdGFjbGVYID0gLTIwMDsgLy8gUmVzZXQgb2JzdGFjbGUgc3BhY2luZyB0cmFja2VyCiAgICAgICAgICAgICAgICAgICAgY29tYm9Db3VudCA9IDA7CiAgICAgICAgICAgICAgICAgICAgY29tYm9NdWx0aXBsaWVyID0gMTsKICAgICAgICAgICAgICAgICAgICBsYXN0T2JzdGFjbGVUaW1lID0gMDsKICAgICAgICAgICAgICAgICAgICBsYXN0U3BlZWRJbmNyZWFzZSA9IDA7IC8vIFJlc2V0IHNwZWVkIGluY3JlYXNlIHRyYWNraW5nCiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnggPSAxMDA7CiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnkgPSBjYW52YXMuaGVpZ2h0IC0gODA7CiAgICAgICAgICAgICAgICAgICAgcGxheWVyLmp1bXBIZWlnaHQgPSAwOwogICAgICAgICAgICAgICAgICAgIHBsYXllci5qdW1wU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgIHBsYXllci5ncm91bmRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgcGxheWVyLmludmluY2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuaW52aW5jaWJsZVN0YXJ0VGltZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgcGxheWVyLmludmluY2libGVEdXJhdGlvbiA9IDA7CiAgICAgICAgICAgICAgICAgICAgcGxheWVyLmRvdWJsZUp1bXAgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucmF0ZUxpbWl0ZXJBY3RpdmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucmF0ZUxpbWl0ZXJTdGFydFRpbWUgPSAwOwogICAgICAgICAgICAgICAgICAgIHBsYXllci5yYXRlTGltaXRlckR1cmF0aW9uID0gMDsKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuZGRvc0FjdGl2ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHBsYXllci5kZG9zVGltZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgaXNSYWluYm93TW9kZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lT3ZlcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBnYW1lIHNlc3Npb24gaWYgbG9nZ2VkIGluCiAgICAgICAgICAgICAgICAgICAgaWYgKGF1dGhUb2tlbikgewogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVHYW1lU2Vzc2lvbigpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBTdGFydCBhIGZyZXNoIGdhbWUgbG9vcCAob25seSBpZiBvbmUgaXNuJ3QgYWxyZWFkeSBydW5uaW5nKQogICAgICAgICAgICAgICAgICAgIGlmICghZ2FtZUxvb3BJZCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgU3RhcnRpbmcgbmV3IGdhbWUgLSBJbml0aWFsIHNwZWVkOiAke2dhbWVTcGVlZH1gKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUxvb3AoKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0dhbWUgbG9vcCBhbHJlYWR5IHJ1bm5pbmcsIG5vdCBzdGFydGluZyBhIG5ldyBvbmUnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZVBhdXNlKCkgewogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lUnVubmluZykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdhbWVQYXVzZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0YXJ0aW5nIHBhdXNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lUGF1c2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdXNlU3RhcnRUaW1lID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuZGluZyBwYXVzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVBhdXNlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF1c2VEdXJhdGlvbiA9IERhdGUubm93KCkgLSBwYXVzZVN0YXJ0VGltZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsUGF1c2VkVGltZSArPSBwYXVzZUR1cmF0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGp1c3QgcG93ZXItdXAgc3RhcnQgdGltZXMgdG8gYWNjb3VudCBmb3IgcGF1c2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuaW52aW5jaWJsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5pbnZpbmNpYmxlU3RhcnRUaW1lICs9IHBhdXNlRHVyYXRpb247CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGxheWVyLnJhdGVMaW1pdGVyQWN0aXZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLnJhdGVMaW1pdGVyU3RhcnRUaW1lICs9IHBhdXNlRHVyYXRpb247CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGxheWVyLmRkb3NBY3RpdmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuZGRvc1N0YXJ0VGltZSArPSBwYXVzZUR1cmF0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgZnVuY3Rpb24gZHJhd0JhY2tncm91bmQoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gU2t5IGdyYWRpZW50CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JhZGllbnQgPSBjdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgMCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsICcjMWExYTJlJyk7CiAgICAgICAgICAgICAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsICcjMTYyMTNlJyk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50OwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIEdyb3VuZAogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzMzMyc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIGNhbnZhcy5oZWlnaHQgLSAzMCwgY2FudmFzLndpZHRoLCAzMCk7CiAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gTW92aW5nIGdyaWQgbGluZXMKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgwLCAyNDUsIDI1NSwgMC4xKSc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JpZE9mZnNldCA9IChEYXRlLm5vdygpICogMC4wNSkgJSA1MDsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gLWdyaWRPZmZzZXQ7IHggPCBjYW52YXMud2lkdGg7IHggKz0gNTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHgsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgZnVuY3Rpb24gZHJhd1VJKCkgewogICAgICAgICAgICAgICAgICAgIC8vIFNjb3JlCiAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnYm9sZCAyNHB4IENvdXJpZXIgTmV3JzsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMGY1ZmYnOwogICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnbGVmdCc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGBTY29yZTogJHtzY29yZS50b0xvY2FsZVN0cmluZygpfWAsIDIwLCA0MCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gSGlnaCBTY29yZQogICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJzE2cHggQ291cmllciBOZXcnOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZDcwMCc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGBCZXN0OiAke3BhcnNlSW50KGhpZ2hTY29yZSkudG9Mb2NhbGVTdHJpbmcoKX1gLCAyMCwgNjUpOwogICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFNwZWVkIGluZGljYXRvcgogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzRlY2RjNCc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGBTcGVlZDogJHtnYW1lU3BlZWQudG9GaXhlZCgxKX14YCwgMjAsIDkwKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBDb21ibyBzeXN0ZW0KICAgICAgICAgICAgICAgICAgICBpZiAoY29tYm9Db3VudCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnYm9sZCAyMHB4IENvdXJpZXIgTmV3JzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbWJvQ291bnQgPiAxMCA/ICcjZmY2YjZiJyA6IGNvbWJvQ291bnQgPiA1ID8gJyNmZmQ3MDAnIDogJyM0ZWNkYzQnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoYPCflKUgQ09NQk8geCR7Y29tYm9Db3VudH0gKCR7Y29tYm9NdWx0aXBsaWVyLnRvRml4ZWQoMSl9eCBwb2ludHMpYCwgMjAsIDEyMCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFBvd2VyLXVwIHN0YXR1cyAoYWRqdXN0ZWQgcG9zaXRpb25zKQogICAgICAgICAgICAgICAgICAgIGxldCB5T2Zmc2V0ID0gMTUwOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci5pbnZpbmNpYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsYXBzZWQgPSBub3cgLSBwbGF5ZXIuaW52aW5jaWJsZVN0YXJ0VGltZTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZUxlZnQgPSBNYXRoLm1heCgwLCBNYXRoLmNlaWwoKHBsYXllci5pbnZpbmNpYmxlRHVyYXRpb24gLSBlbGFwc2VkKSAvIDEwMDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnMTZweCBDb3VyaWVyIE5ldyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwY2VjOSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChg8J+noCBJTlZJTkNJQkxFICgke3RpbWVMZWZ0fXMpYCwgMjAsIHlPZmZzZXQpOwogICAgICAgICAgICAgICAgICAgICAgICB5T2Zmc2V0ICs9IDI1OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAocGxheWVyLmRvdWJsZUp1bXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnMTZweCBDb3VyaWVyIE5ldyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzZjNWNlNyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgn4pqZ77iPIERPVUJMRSBKVU1QJywgMjAsIHlPZmZzZXQpOwogICAgICAgICAgICAgICAgICAgICAgICB5T2Zmc2V0ICs9IDI1OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAocGxheWVyLnJhdGVMaW1pdGVyQWN0aXZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsYXBzZWQgPSBub3cgLSBwbGF5ZXIucmF0ZUxpbWl0ZXJTdGFydFRpbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVMZWZ0ID0gTWF0aC5tYXgoMCwgTWF0aC5jZWlsKChwbGF5ZXIucmF0ZUxpbWl0ZXJEdXJhdGlvbiAtIGVsYXBzZWQpIC8gMTAwMCkpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICcxNnB4IENvdXJpZXIgTmV3JzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjYTI5YmZlJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGDwn5uh77iPIFJBVEUgTElNSVRFUiAoJHt0aW1lTGVmdH1zKWAsIDIwLCB5T2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgeU9mZnNldCArPSAyNTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gUGF1c2UgaW5kaWNhdG9yCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVQYXVzZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnYm9sZCA0OHB4IENvdXJpZXIgTmV3JzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOSknOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgn4o+477iPIFBBVVNFRCcsIGNhbnZhcy53aWR0aC8yLCBjYW52YXMuaGVpZ2h0LzIpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICcyMHB4IENvdXJpZXIgTmV3JzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjNGVjZGM0JzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCdQcmVzcyBQIHRvIHJlc3VtZSB8IFIgdG8gcmVzdGFydCcsIGNhbnZhcy53aWR0aC8yLCBjYW52YXMuaGVpZ2h0LzIgKyA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnbGVmdCc7IC8vIFJlc2V0IGFsaWdubWVudAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBERE9TIGF0dGFjayB3YXJuaW5nIQogICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuZGRvc0FjdGl2ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lTGVmdCA9IE1hdGguY2VpbChwbGF5ZXIuZGRvc1RpbWUgLyAxMDAwKTsgLy8gQ29udmVydCBtaWxsaXNlY29uZHMgdG8gc2Vjb25kcwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmbGFzaE9wYWNpdHkgPSBNYXRoLnNpbihEYXRlLm5vdygpICogMC4wMikgKiAwLjUgKyAwLjU7IC8vIEZsYXNoaW5nIGVmZmVjdAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBmbGFzaE9wYWNpdHk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJ2JvbGQgNDhweCBDb3VyaWVyIE5ldyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmMDAwMCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCfimqDvuI8gRERPUyBBVFRBQ0shIOKaoO+4jycsIGNhbnZhcy53aWR0aC8yLCAxNTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICdib2xkIDI0cHggQ291cmllciBOZXcnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZjZiNmInOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoYFNZU1RFTSBVTlNUQUJMRSAoJHt0aW1lTGVmdH1zKWAsIGNhbnZhcy53aWR0aC8yLCAxODApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOyAvLyBSZXNldCBvcGFjaXR5CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnbGVmdCc7IC8vIFJlc2V0IGFsaWdubWVudAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIGluZGljYXRvcgogICAgICAgICAgICAgICAgICAgIGlmICghcGxheWVyLmdyb3VuZGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZmYwMCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgn8J+agCBKVU1QSU5HJywgMjAsIDE2MCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIChpc1JhaW5ib3dNb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJ2JvbGQgMjBweCBDb3VyaWVyIE5ldyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JhZGllbnQgPSBjdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgY2FudmFzLndpZHRoLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsICcjZmYwMDAwJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjE2LCAnI2ZmN2YwMCcpOwogICAgICAgICAgICAgICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMC4zMywgJyNmZmZmMDAnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNSwgJyMwMGZmMDAnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNjYsICcjMDAwMGZmJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjgzLCAnIzRiMDA4MicpOwogICAgICAgICAgICAgICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMSwgJyM5NDAwZDMnKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoJ/CfjIggWEFOTyBSRUNPVkVSWSBOT0RFIEFDVElWQVRFRCEg8J+MiCcsIGNhbnZhcy53aWR0aC8yLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2FtZUxvb3AoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFnYW1lUnVubmluZykgewogICAgICAgICAgICAgICAgICAgICAgICBnYW1lTG9vcElkID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBDbGVhciBjYW52YXMKICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBiYWNrZ3JvdW5kCiAgICAgICAgICAgICAgICAgICAgZHJhd0JhY2tncm91bmQoKTsKICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiAoIWdhbWVQYXVzZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU0FGRVRZIENIRUNLIC0gRW5zdXJlIHNwZWVkIGhhc24ndCBnb25lIGNyYXp5CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkTWF4U3BlZWQgPSBiYXNlR2FtZVNwZWVkICsgTWF0aC5mbG9vcihzY29yZSAvIDgwMCkgKiAwLjE1ICsgMjsgLy8gKzIgYnVmZmVyCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lU3BlZWQgPiBleHBlY3RlZE1heFNwZWVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFNQRUVEIEFOT01BTFkgREVURUNURUQhIGdhbWVTcGVlZCB3YXMgJHtnYW1lU3BlZWR9LCBleHBlY3RlZCBtYXggJHtleHBlY3RlZE1heFNwZWVkfSwgcmVzZXR0aW5nLi4uYCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lU3BlZWQgPSBiYXNlR2FtZVNwZWVkICsgTWF0aC5mbG9vcihzY29yZSAvIDgwMCkgKiAwLjE1OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZ2FtZSBvYmplY3RzIG9ubHkgd2hlbiBub3QgcGF1c2VkCiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBsYXllcigpOwogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVPYnN0YWNsZXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUG93ZXJVcHMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tDb2xsaXNpb25zKCk7CiAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzY29yZSB3aXRoIGNvbWJvIG11bHRpcGxpZXIKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFzZVBvaW50cyA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlICs9IE1hdGguZmxvb3IoYmFzZVBvaW50cyAqIGNvbWJvTXVsdGlwbGllcik7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCBjb21ibyBpZiB0b28gbXVjaCB0aW1lIGhhcyBwYXNzZWQgd2l0aG91dCBkb2RnaW5nIG9ic3RhY2xlcwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tYm9Db3VudCA+IDAgJiYgRGF0ZS5ub3coKSAtIGxhc3RPYnN0YWNsZVRpbWUgPiAzMDAwKSB7IC8vIDMgc2Vjb25kcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tYm9Db3VudCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21ib011bHRpcGxpZXIgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGluY3JlYXNlIHNwZWVkIGF0IHNwZWNpZmljIHNjb3JlIGludGVydmFscywgbm90IGV2ZXJ5IGZyYW1lCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY29yZSA+IDAgJiYgc2NvcmUgJSA4MDAgPT09IDAgJiYgc2NvcmUgIT09IGxhc3RTcGVlZEluY3JlYXNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgc3BlZWQgYmFzZWQgb24gYmFzZSBzcGVlZCArIHNjb3JlLWJhc2VkIGluY3JlbWVudHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkU3BlZWQgPSBiYXNlR2FtZVNwZWVkICsgTWF0aC5mbG9vcihzY29yZSAvIDgwMCkgKiAwLjE1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVNwZWVkID0gZXhwZWN0ZWRTcGVlZDsgLy8gU2V0IHRvIGNhbGN1bGF0ZWQgdmFsdWUsIGRvbid0IGFjY3VtdWxhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RTcGVlZEluY3JlYXNlID0gc2NvcmU7IC8vIFByZXZlbnQgbXVsdGlwbGUgaW5jcmVtZW50cyBhdCB0aGUgc2FtZSBzY29yZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFNwZWVkIHNldCB0byAke2dhbWVTcGVlZC50b0ZpeGVkKDIpfSBhdCBzY29yZSAke3Njb3JlfSAoYmFzZTogJHtiYXNlR2FtZVNwZWVkfSlgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBERE9TIGF0dGFjayBhdCAxMCwwMDAgcG9pbnRzIQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcmUgPT09IDEwMDAwICYmICFwbGF5ZXIuZGRvc0FjdGl2ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmRkb3NBY3RpdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmRkb3NTdGFydFRpbWUgPSBEYXRlLm5vdygpOyAvLyBUcmFjayBhY3R1YWwgc3RhcnQgdGltZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmRkb3NUaW1lID0gNjAwOyAvLyAxMCBzZWNvbmRzIG9mIHB1cmUgY2hhb3MhCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBnYW1lIG9iamVjdHMKICAgICAgICAgICAgICAgICAgICBvYnN0YWNsZXMuZm9yRWFjaChkcmF3T2JzdGFjbGUpOwogICAgICAgICAgICAgICAgICAgIHBvd2VyVXBzLmZvckVhY2goZHJhd1Bvd2VyVXApOwogICAgICAgICAgICAgICAgICAgIGRyYXdQbGF5ZXIoKTsKICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IFVJIChhbHdheXMgdmlzaWJsZSwgZXZlbiB3aGVuIHBhdXNlZCkKICAgICAgICAgICAgICAgICAgICBkcmF3VUkoKTsKICAgICAgICAKICAgICAgICAgICAgICAgICAgICBnYW1lTG9vcElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGdhbWVMb29wKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIC8vIEV2ZW50IGxpc3RlbmVycwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0tleSBwcmVzc2VkOicsIGUuY29kZSwgZS5rZXksIGUua2V5Q29kZSk7IC8vIERlYnVnCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGdhbWUgc2hvcnRjdXRzIHdoaWxlIHR5cGluZyBpbiBmb3JtIGZpZWxkcyBvciBlZGl0YWJsZSBlbGVtZW50cwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZ05hbWUgPSB0YXJnZXQgJiYgdGFyZ2V0LnRhZ05hbWUgPyB0YXJnZXQudGFnTmFtZS50b1VwcGVyQ2FzZSgpIDogJyc7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRhZ05hbWUgPT09ICdJTlBVVCcgfHwgdGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyB8fCB0YWdOYW1lID09PSAnU0VMRUNUJyB8fCAodGFyZ2V0ICYmIHRhcmdldC5pc0NvbnRlbnRFZGl0YWJsZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBLZXlib2FyZCBzaG9ydGN1dHMKICAgICAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdyJyB8fCBlLmtleSA9PT0gJ1InKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVSdW5uaW5nIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lT3ZlcicpLnN0eWxlLmRpc3BsYXkgPT09ICdibG9jaycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3RhcnRHYW1lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdwJyB8fCBlLmtleSA9PT0gJ1AnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlUGF1c2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3Igc3BhY2Ugd2l0aCBtdWx0aXBsZSBtZXRob2RzCiAgICAgICAgICAgICAgICAgICAgaWYgKChlLmNvZGUgPT09ICdTcGFjZScgfHwgZS5rZXkgPT09ICcgJyB8fCBlLmtleUNvZGUgPT09IDMyKSAmJiBnYW1lUnVubmluZyAmJiAhZ2FtZVBhdXNlZCkgewogICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGp1bXAoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gS29uYW1pIGNvZGUgZGV0ZWN0aW9uCiAgICAgICAgICAgICAgICAgICAga29uYW1pQ29kZS5wdXNoKGUua2V5Q29kZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGtvbmFtaUNvZGUubGVuZ3RoID4ga29uYW1pU2VxdWVuY2UubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGtvbmFtaUNvZGUuc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgKGtvbmFtaUNvZGUubGVuZ3RoID09PSBrb25hbWlTZXF1ZW5jZS5sZW5ndGggJiYKICAgICAgICAgICAgICAgICAgICAgICAga29uYW1pQ29kZS5ldmVyeSgoY29kZSwgaW5kZXgpID0+IGNvZGUgPT09IGtvbmFtaVNlcXVlbmNlW2luZGV4XSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXNSYWluYm93TW9kZSA9ICFpc1JhaW5ib3dNb2RlOwogICAgICAgICAgICAgICAgICAgICAgICBrb25hbWlDb2RlID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNSYWluYm93TW9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmludmluY2libGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmludmluY2libGVTdGFydFRpbWUgPSBEYXRlLm5vdygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmludmluY2libGVEdXJhdGlvbiA9IDEwMDAwOyAvLyAxMCBzZWNvbmRzIGluIG1pbGxpc2Vjb25kcwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFN0YXJ0IGdhbWUgLSBjaGVjayBtdWx0aXBsZSB3YXlzIHRvIGRldGVjdCBzcGFjZQogICAgICAgICAgICAgICAgICAgIGlmICgoZS5jb2RlID09PSAnU3BhY2UnIHx8IGUua2V5ID09PSAnICcgfHwgZS5rZXlDb2RlID09PSAzMikgJiYgIWdhbWVSdW5uaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBnYW1lIScpOyAvLyBEZWJ1ZwogICAgICAgICAgICAgICAgICAgICAgICByZXN0YXJ0R2FtZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgIAogICAgICAgICAgICAgICAgLy8gQ2xpY2sgc3VwcG9ydCBmb3Igc3RhcnRpbmcgZ2FtZQogICAgICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZVJ1bm5pbmcgJiYgIWdhbWVQYXVzZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAganVtcCgpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBnYW1lIHZpYSBjbGljayEnKTsgLy8gRGVidWcKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdGFydEdhbWUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFRvdWNoIHN1cHBvcnQgZm9yIG1vYmlsZQogICAgICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZVJ1bm5pbmcgJiYgIWdhbWVQYXVzZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAganVtcCgpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3RhcnRHYW1lKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09IEFVVEhFTlRJQ0FUSU9OIEZVTkNUSU9OUyA9PT09PT09PT09PT09PT09PT09PQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2dpbihlbWFpbCwgcGFzc3dvcmQpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke1hBTk9fQVVUSF9BUEl9L2F1dGgvbG9naW5gLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZW1haWwsIHBhc3N3b3JkIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoVG9rZW4gPSBkYXRhLmF1dGhUb2tlbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd4YW5vQXV0aFRva2VuJywgYXV0aFRva2VuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVBdXRoVUkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZGF0YS5tZXNzYWdlIHx8ICdMb2dpbiBmYWlsZWQnIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdOZXR3b3JrIGVycm9yJyB9OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIHNpZ251cChuYW1lLCBlbWFpbCwgcGFzc3dvcmQpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke1hBTk9fQVVUSF9BUEl9L2F1dGgvc2lnbnVwYCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGVtYWlsLCBwYXNzd29yZCB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aFRva2VuID0gZGF0YS5hdXRoVG9rZW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgneGFub0F1dGhUb2tlbicsIGF1dGhUb2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBnZXRDdXJyZW50VXNlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQXV0aFVJKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGRhdGEubWVzc2FnZSB8fCAnU2lnbnVwIGZhaWxlZCcgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05ldHdvcmsgZXJyb3InIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdXRoVG9rZW4pIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke1hBTk9fQVVUSF9BUEl9L2F1dGgvbWVgLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7YXV0aFRva2VufWAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VXNlciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ291dCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyOicsIGVycm9yKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgICAgICAgICAgICAgICAgYXV0aFRva2VuID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50VXNlciA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudEdhbWVJZCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3hhbm9BdXRoVG9rZW4nKTsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVBdXRoVUkoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUF1dGhVSSgpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhdXRoU2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRoU2VjdGlvbicpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJJbmZvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJJbmZvJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVhZGVyYm9hcmRCdG5Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVhZGVyYm9hcmRCdG5Db250YWluZXInKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFVzZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXV0aFNlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgdXNlckluZm8uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyTmFtZScpLnRleHRDb250ZW50ID0gY3VycmVudFVzZXIubmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgbGVhZGVyYm9hcmRCdG5Db250YWluZXIuc3R5bGUudG9wID0gJzIwcHgnOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdXNlciBqdXN0IGxvZ2dlZCBpbi9zaWduZWQgdXAgYW5kIHdlIGhhdmUgYSBzY29yZSB0byBzdWJtaXQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RTY29yZSA+IDAgJiYgIWdhbWVSdW5uaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtaXRTY29yZUFmdGVyQXV0aChsYXN0U2NvcmUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFNjb3JlID0gMDsgLy8gUmVzZXQgc28gd2UgZG9uJ3Qgc3VibWl0IGFnYWluCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBhdXRoU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgICAgICAgICAgICAgICAgICB1c2VySW5mby5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICBsZWFkZXJib2FyZEJ0bkNvbnRhaW5lci5zdHlsZS50b3AgPSAnNzBweCc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT0gTEVBREVSQk9BUkQgRlVOQ1RJT05TID09PT09PT09PT09PT09PT09PT09CiAgICAgICAgCiAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBjcmVhdGVHYW1lU2Vzc2lvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWF1dGhUb2tlbikgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7WEFOT19MRUFERVJCT0FSRF9BUEl9L2dhbWVgLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRHYW1lSWQgPSBkYXRhLmlkOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBnYW1lIHNlc3Npb24nKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGdhbWUgc2Vzc2lvbjonLCBlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gc3VibWl0U2NvcmUocGxheWVyU2NvcmUsIGdhbWVJZCkgewogICAgICAgICAgICAgICAgICAgIGlmICghYXV0aFRva2VuIHx8ICFnYW1lSWQpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke1hBTk9fTEVBREVSQk9BUkRfQVBJfS9zY29yZWAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7YXV0aFRva2VufWAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlOiBwbGF5ZXJTY29yZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lX2lkOiBnYW1lSWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2NvcmUgc3VibWl0dGVkIHN1Y2Nlc3NmdWxseSEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzdWJtaXQgc2NvcmUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN1Ym1pdHRpbmcgc2NvcmU6JywgZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIHN1Ym1pdFNjb3JlQWZ0ZXJBdXRoKHBsYXllclNjb3JlKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGdhbWUgc2Vzc2lvbiBhbmQgc3VibWl0IHRoZSBzY29yZQogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke1hBTk9fTEVBREVSQk9BUkRfQVBJfS9nYW1lYCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZVJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBnYW1lRGF0YSA9IGF3YWl0IGdhbWVSZXNwb25zZS5qc29uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdWJtaXRTY29yZShwbGF5ZXJTY29yZSwgZ2FtZURhdGEuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaG93IHN1Y2Nlc3MgbWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYPCfjokgU2NvcmUgJHtwbGF5ZXJTY29yZS50b0xvY2FsZVN0cmluZygpfSBzYXZlZCB0byBsZWFkZXJib2FyZCFgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGlkZSB0aGUgc2NvcmUgcHJvbXB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmVQcm9tcHQnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3VibWl0dGluZyBzY29yZSBhZnRlciBhdXRoOicsIGVycm9yKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBnZXRMZWFkZXJib2FyZCgpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke1hBTk9fTEVBREVSQk9BUkRfQVBJfS9sZWFkZXJib2FyZHNgKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLml0ZW1zIHx8IFtdOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBsZWFkZXJib2FyZDonLCBlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PSBNT0RBTCBGVU5DVElPTlMgPT09PT09PT09PT09PT09PT09PT0KICAgICAgICAKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dMb2dpbk1vZGFsKCkgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbk1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dTaWdudXBNb2RhbCgpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnbnVwTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2hvd0xlYWRlcmJvYXJkKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlYWRlcmJvYXJkTW9kYWwnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlYWRlcmJvYXJkQ29udGVudCcpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgICAgICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ibG9hZGluZy10ZXh0Ij48ZGl2IGNsYXNzPSJsb2FkaW5nLXNwaW5uZXIiPjwvZGl2PkxvYWRpbmcgYmFja2VuZCBzdXJ2aXZvcnMuLi48L2Rpdj4nOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlYWRlcmJvYXJkID0gYXdhaXQgZ2V0TGVhZGVyYm9hcmQoKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiAobGVhZGVyYm9hcmQubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gJzxwIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiAjZmY2YjZiOyI+Tm8gc2NvcmVzIHlldCEgQmUgdGhlIGZpcnN0IHRvIHN1cnZpdmUgdGhlIGJhY2tlbmQgbmlnaHRtYXJlITwvcD4nOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxldCBodG1sID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9ImxlYWRlcmJvYXJkLXRhYmxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5SYW5rPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPkRldmVsb3BlcjwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5TY29yZTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsZWFkZXJib2FyZC5mb3JFYWNoKChlbnRyeSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFuayA9IGluZGV4ICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFua0Vtb2ppID0gcmFuayA9PT0gMSA/ICfwn6WHJyA6IHJhbmsgPT09IDIgPyAn8J+liCcgOiByYW5rID09PSAzID8gJ/CfpYknIDogYCMke3Jhbmt9YDsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7cmFua0Vtb2ppfTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7ZW50cnkudXNlciA/IGVudHJ5LnVzZXIubmFtZSA6ICdBbm9ueW1vdXMnfTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7ZW50cnkuc2NvcmUudG9Mb2NhbGVTdHJpbmcoKX08L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBodG1sICs9IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb250ZW50LmlubmVySFRNTCA9IGh0bWw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsSWQpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb2RhbElkKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT0gRk9STSBIQU5ETEVSUyA9PT09PT09PT09PT09PT09PT09PQogICAgICAgIAogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luRm9ybScpLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGFzeW5jIChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luRW1haWwnKS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXNzd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpblBhc3N3b3JkJykudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5FcnJvcicpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGVycm9yRGl2LnRleHRDb250ZW50ID0gJyc7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gU2hvdyBsb2FkaW5nIHN0YXRlCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gc3VibWl0QnV0dG9uLnRleHRDb250ZW50OwogICAgICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ibG9hZGluZy1zcGlubmVyIj48L2Rpdj5Mb2dnaW5nIGluLi4uJzsKICAgICAgICAgICAgICAgICAgICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGxvZ2luKGVtYWlsLCBwYXNzd29yZCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gUmVzdG9yZSBidXR0b24gc3RhdGUKICAgICAgICAgICAgICAgICAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQ7CiAgICAgICAgICAgICAgICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlTW9kYWwoJ2xvZ2luTW9kYWwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luRm9ybScpLnJlc2V0KCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JEaXYudGV4dENvbnRlbnQgPSByZXN1bHQuZXJyb3I7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnbnVwRm9ybScpLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGFzeW5jIChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnbnVwTmFtZScpLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ251cEVtYWlsJykudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnbnVwUGFzc3dvcmQnKS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWdudXBFcnJvcicpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPSJzdWJtaXQiXScpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGVycm9yRGl2LnRleHRDb250ZW50ID0gJyc7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gU2hvdyBsb2FkaW5nIHN0YXRlCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gc3VibWl0QnV0dG9uLnRleHRDb250ZW50OwogICAgICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ibG9hZGluZy1zcGlubmVyIj48L2Rpdj5DcmVhdGluZyBhY2NvdW50Li4uJzsKICAgICAgICAgICAgICAgICAgICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ251cChuYW1lLCBlbWFpbCwgcGFzc3dvcmQpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFJlc3RvcmUgYnV0dG9uIHN0YXRlCiAgICAgICAgICAgICAgICAgICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0OwogICAgICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgICBjbG9zZU1vZGFsKCdzaWdudXBNb2RhbCcpOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnbnVwRm9ybScpLnJlc2V0KCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JEaXYudGV4dENvbnRlbnQgPSByZXN1bHQuZXJyb3I7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PSBJTklUSUFMSVpBVElPTiA9PT09PT09PT09PT09PT09PT09PQogICAgICAgIAogICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBhbHJlYWR5IGxvZ2dlZCBpbgogICAgICAgICAgICAgICAgaWYgKGF1dGhUb2tlbikgewogICAgICAgICAgICAgICAgICAgIGdldEN1cnJlbnRVc2VyKCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUF1dGhVSSgpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBnYW1lCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2FtZSBpbml0aWFsaXppbmcuLi4nKTsgLy8gRGVidWcKICAgICAgICAgICAgICAgIGRyYXdCYWNrZ3JvdW5kKCk7CiAgICAgICAgICAgICAgICBkcmF3VUkoKTsKICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJ2JvbGQgMzJweCBDb3VyaWVyIE5ldyc7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMGY1ZmYnOwogICAgICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCdDTElDSyBUTyBTVEFSVCcsIGNhbnZhcy53aWR0aC8yLCBjYW52YXMuaGVpZ2h0LzIpOwogICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnMTZweCBDb3VyaWVyIE5ldyc7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM0ZWNkYzQnOwogICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCdTdXJ2aXZlIHRoZSBiYWNrZW5kIG5pZ2h0bWFyZSEnLCBjYW52YXMud2lkdGgvMiwgY2FudmFzLmhlaWdodC8yICsgNDApOwogICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCcoU3BhY2Ugb3IgQ2xpY2sgdG8ganVtcCknLCBjYW52YXMud2lkdGgvMiwgY2FudmFzLmhlaWdodC8yICsgNjApOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBGSU5BTCBTQUZFVFkgQ0hFQ0sgLSBFbnN1cmUgc3BlZWQgaXMgY29ycmVjdCBhZnRlciBhbGwgaW5pdGlhbGl6YXRpb24KICAgICAgICAgICAgICAgIGlmIChnYW1lU3BlZWQgIT09IGJhc2VHYW1lU3BlZWQpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFdBUk5JTkc6IGdhbWVTcGVlZCB3YXMgJHtnYW1lU3BlZWR9LCBmb3JjaW5nIHRvICR7YmFzZUdhbWVTcGVlZH1gKTsKICAgICAgICAgICAgICAgICAgICBnYW1lU3BlZWQgPSBiYXNlR2FtZVNwZWVkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBHYW1lIGluaXRpYWxpemF0aW9uIGNvbXBsZXRlCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2FtZSBpbml0aWFsaXplZCBhbmQgcmVhZHkgdG8gcGxheSEgRmluYWwgZ2FtZVNwZWVkOicsIGdhbWVTcGVlZCk7CiAgICAgICAgICAgIDwvc2NyaXB0PgogICAgICAgIDwvYm9keT4KICAgICAgICA8L2h0bWw+CiAgICAgICAgIiIiCiAgICB9IGFzICR4MQogIAogICAgdXRpbC5zZXRfaGVhZGVyIHsKICAgICAgdmFsdWUgPSAiY29udGVudC10eXBlOiB0ZXh0L2h0bWwiCiAgICAgIGR1cGxpY2F0ZXMgPSAicmVwbGFjZSIKICAgIH0KICB9CgogIHJlc3BvbnNlID0gJHgxCn0="
  },
  {
    "id": 45,
    "type": "api_group",
    "path": "apis/game/api_group.xs",
    "status": "unchanged",
    "staged": false,
    "sha256": "338703efdae38a950050bd40aa3e1b4a935fdcf2b294e825c7756f8eb6d5db9b",
    "original": "YXBpX2dyb3VwIEdhbWUgewogIGNhbm9uaWNhbCA9ICJTMlBER2tlVyIKfQ=="
  },
  {
    "id": 15,
    "type": "add_on",
    "path": "addons/15_user.xs",
    "status": "unchanged",
    "staged": false,
    "sha256": "80f4a2c8a421e580440c8e64e446d5ea09e4f6cf12c208f3ade26dd16a3812a9",
    "original": "YWRkb24gdXNlciB7CiAgaW5wdXQgewogICAgdXVpZCB1c2VyX2lkPyB7CiAgICAgIHRhYmxlID0gInVzZXIiCiAgICB9CiAgfQoKICBzdGFjayB7CiAgICBkYi5xdWVyeSB1c2VyIHsKICAgICAgd2hlcmUgPSAkZGIudXNlci5pZCA9PSAkaW5wdXQudXNlcl9pZAogICAgICByZXR1cm4gPSB7dHlwZTogInNpbmdsZSJ9CiAgICB9CiAgfQp9"
  }
]